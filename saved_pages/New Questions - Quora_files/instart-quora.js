// Copyright (c)2012 and onwards Instart Inc. All rights reserved.
// 4640-e6b44d6
"undefined"==typeof INSTART&&(INSTART={});INSTART.nologging=!0;"undefined"===typeof INSTART&&(INSTART={});INSTART.prof={};(function(){var j=[];INSTART.registerInit=function(c){j.push(c)};INSTART.init=function(c){if("undefined"==typeof INSTART.features||INSTART.features.enabled()){c.wrap=c.enableImageVirtualization||c.useImageApi||c.partialImage?!0:!1;INSTART.console.log("TRACE: Initializing modules");for(var l=0;l<j.length;l++)"undefined"!=typeof j[l]&&(INSTART.console.log("TRACE: calling initializer "+j[l]),j[l](c))}}})();"undefined"===typeof INSTART&&(INSTART={});"undefined"===typeof INSTART.device&&(INSTART.device={});
(function(){INSTART.device.browser=function(j){var c=function(b){return{major:b[1]||0,minor:b[3]||0,micro:b[5]||0}},c={browser:[{sub:/Chrome\/([\d]+)(\.([\d]+))?(\.([\d]+))?/,name:"chrome",process:c},{sub:/Firefox\/([\d]+)(\.([\d]+))?(\.([\d]+))?/,name:"firefox",process:c},{sub:/MSIE\s([\d]+)(\.([\d]+))?(\.([\d]+))?/,name:"msie",process:c},{sub:/Version\/([\d]+)(\.([\d]+))?(\.([\d]+))?.*Safari/,name:"safari",process:c}],os:[{sub:/Android\s([\d]+)(\.([\d]+))?(\.([\d]+))?/,name:"android",process:c},
{sub:/CPU OS ([\d]+)(_([\d]+))?(_([\d]+))?/,name:"ios",process:c},{sub:/CPU iPhone OS ([\d]+)(_([\d]+))?(_([\d]+))?/,name:"ios",process:c}]},l={browser:{name:"",ver:[0,0,0]},os:{name:"",ver:[0,0,0]}},k;for(k in c)for(var m=c[k],f=0;f<m.length;f++){var h=m[f],n=h.sub.exec(j);if(null!=n){m=h.process(n);l[k]={name:h.name,ver:[parseInt(m.major,10),parseInt(m.minor,10),parseInt(m.micro,10)]};break}}return l};INSTART.device.info=INSTART.device.browser(navigator.userAgent)})();(function(){var j={log:function(){},error:function(){}};INSTART.console=!0===INSTART.nologging?j:console})();(function(j){INSTART.err={};INSTART.err.url="//assets0.insnw.net/instart/profile/0/";INSTART.err.conf=null;INSTART.registerInit(function(c){"apiDomain"in c&&(INSTART.err.url="//"+c.apiDomain+"/instart/profile/0/");INSTART.err.conf=c;var l=function(c){INSTART.console.log("encountered error "+c);c={id:"jsdump",data:{filename:c.filename,lineno:c.lineno,message:c.message,timestamp:c.timeStamp,useragent:navigator.userAgent,href:window.location.href,conf:INSTART.err.conf}};var f=new XMLHttpRequest;f.open("POST",
INSTART.err.url);f.withCredentials=!1;f.onload=function(){INSTART.console.log("dump sent")};f.onerror=function(){INSTART.console.log("dump failed")};f.send(INSTART.common.json.stringify(c))};if("undefined"!==typeof j.addEventListener&&"undefined"!==typeof ErrorEvent)INSTART.console.log("adding error event listener"),j.addEventListener("error",l,!1);else{INSTART.console.log("falling back to window.onerror");var k=j.onerror;j.onerror=function(c,f,h){l({message:c,filename:f,lineno:h});"undefined"!==
typeof k&&("function"===typeof k?k(c,f,h):"string"===typeof k&&exec(k))}}})})(window,document);(function(j){INSTART.beacon={};var c="-1",l=!1,k=0,m=0,f={};INSTART.beacon.getBlankGif=function(){return location.protocol+"//"+INSTART.common.apiDomain+"/instart/blank.gif"};var h=function(){var b=INSTART&&INSTART.image2?new INSTART.image2.RealImage:new Image,e=[],a;for(a in f)e.push(a+"="+encodeURIComponent(INSTART.common.json.stringify(f[a])));e.push("rid="+encodeURIComponent(c));e.push("url="+encodeURIComponent(j.location.href));b.src=INSTART.beacon.getBlankGif()+"?"+e.join("&");b.addEventListener("load",
function(){b.removeEventListener("load",arguments.callee)})};j.addEventListener("load",function(){l=!0;m==k&&setTimeout(h,0)},!1);INSTART.beacon.register=function(b){INSTART.console.log("registered beacon "+b);if(b in f)throw"duplicate beacon registration of "+b;f[b]=null;k++};INSTART.beacon.set=function(b,e){if(null!==f[b]){if("undefined"===typeof f[b])throw"unregistered beacon: "+b;throw"duplicate beacon set: "+b;}f[b]=e;m++;m==k&&l&&h()};var n=(new Date).valueOf();INSTART.beacon.register("beacon");
j.addEventListener("load",function(){var b=(new Date).valueOf();setTimeout(function(){var e={};if("undefined"!==typeof j.performance&&"undefined"!==typeof j.performance.timing&&"undefined"!==typeof j.performance.navigation){e.timing={};for(var a in j.performance.timing)"function"!=typeof j.performance.timing[a]&&(e.timing[a]=j.performance.timing[a]);e.nav={redirectCount:j.performance.navigation.redirectCount,type:j.performance.navigation.type}}else e.lower_bound=b-n;INSTART.beacon.set("beacon",e)},
1)},!1);INSTART.registerInit(function(b){c=b.rId||c})})(window,document);(function(j,c){INSTART.common={};INSTART.common.json=JSON;var l=function(){for(var a=INSTART.common.getOldFcn(c.getElementsByTagName).call(c,"img"),d=0;d<a.length;d++)if(INSTART.staticImg.isDomainIntercepted(a[d].src))return!0;return!1},k="Node Element HTMLElement HTMLHtmlElement HTMLHeadElement HTMLTitleElement HTMLBaseElement HTMLLinkElement HTMLMetaElement HTMLStyleElement HTMLScriptElement HTMLBodyElement HTMLHeadingElement HTMLParagraphElement HTMLHRElement HTMLPreElement HTMLQuoteElement HTMLOListElement HTMLUListElement HTMLLIElement HTMLDListElement HTMLDivElement HTMLAnchorElement HTMLDataElement HTMLTimeElement HTMLSpanElement HTMLBRElement HTMLModElement HTMLImageElement HTMLIFrameElement HTMLEmbedElement HTMLObjectElement HTMLParamElement HTMLVideoElement HTMLAudioElement HTMLSourceElement HTMLTrackElement HTMLMediaElement HTMLCanvasElement HTMLMapElement HTMLAreaElement HTMLTableElement HTMLTableCaptionElement HTMLTableColElement HTMLTableSectionElement HTMLTableRowElement HTMLTableDataCellElement HTMLTableHeaderCellElement HTMLTableCellElement HTMLFormElement HTMLFieldSetElement HTMLLegendElement HTMLLabelElement HTMLInputElement HTMLButtonElement HTMLSelectElement HTMLDataListElement HTMLOptGroupElement HTMLOptionElement HTMLTextAreaElement HTMLKeygenElement HTMLOutputElement HTMLProgressElement HTMLMeterElement HTMLDetailsElement HTMLCommandElement HTMLMenuElement DocumentFragment".split(" ");
INSTART.common.baseClass=j.Node?j.Node:j.Element?j.Element:j.HTMLElement;for(var m=INSTART.common,f=[],h=k.length,n=0;n<h;n++){var b=j[k[n]];b&&f.push(b)}m.htmlElements=f;INSTART.common.isWrapper=function(a){return!!a&&!!a.__unwrapped};INSTART.common.addWrapperProperty=function(a,d){d.__unwrapped={value:a,writable:!1,enumerable:!1}};INSTART.common.protoWrapperProperties=function(a){return{__unwrapped:{value:a,writable:!1,enumerable:!1}}};INSTART.common.protoProperties=function(){return{__instartProtoWrapper:{value:!0,
writable:!1,enumerable:!1}}};INSTART.common.isProtoWrapper=function(a){return!!a&&!0===a.__instartProtoWrapper};INSTART.common.strictUnwrap=function(a){return a.__unwrapped};INSTART.common.unwrapProtoWrapper=function(a){return a.__unwrapped};INSTART.common.unwrap=function(a){return a.__unwrapped?a.__unwrapped:a};INSTART.common.setWrapper=function(a,d){Object.defineProperty(a,"__wrapper",{value:d,enumerable:!1,writable:!1})};INSTART.common.hasWrapper=function(a){return a&&"__wrapper"in a};INSTART.common.getWrapper=
function(a){return a.__wrapper};INSTART.common.markFake=function(a){var d={value:!0,enumerable:!1,writable:!1};Object.defineProperty(a,"__fakeNode",d);Object.defineProperty(INSTART.common.unwrap(a),"__fakeNode",d)};INSTART.common.isFakeNode=function(a){return!0===a.__fakeNode};INSTART.common.markDontOverride=function(a,d){if("function"!=typeof a)debugger;Object.defineProperty(a,"__dontOverride",{value:!0,enumerable:!1,writable:!1});Object.defineProperty(a,"__old",{value:d,enumerable:!1,writable:!1})};
INSTART.common.dontOverride=function(a){return!0===a.__dontOverride};INSTART.common.getOldFcn=function(a){return INSTART.common.dontOverride(a)?a.__old:a};k="afterupdate beforecopy beforecut beforeeditfocus beforepaste beforeupdate cellchange controlselect copy cut dataavailable datasetchanged datasetcomplete errorupdate filterchange help layoutcomplete losecapture mousewheel move moveend movestart paste propertychange resizeend resizestart rowenter rowexit rowsdelete rowsinserted selectionchange selectstart stop storagecommit abort activate afterprint afterscriptexecute beforescriptexecute beforeactivate beforeprint beforeunload blur cancel canplay canplaythrough change click close contextmenu cuechange dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended error focus hashchange input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup mousewheel offline online pause play playing pagehide pageshow popstate progress ratechange reset resize scroll search seeked seeking select selectstart show stalled storage submit suspend timeupdate unload volumechange waiting wheel mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror webkitfullscreenchange webkitfullscreenerror".split(" ");
INSTART.common.onStarAttrs={};INSTART.common.dom0Handlers={};for(m=0;m<k.length;m++)f=k[m],h="on"+f,INSTART.common.onStarAttrs[f]=h,INSTART.common.dom0Handlers[h]=!0;INSTART.common.styleImageChangerMap={backgroundImage:["backgroundImage"],background:["backgroundImage"],listStyleImage:["listStyleImage"],listStyle:["listStyleImage"],borderImage:["borderImage"],border:["borderImage"],cssText:["backgroundImage","borderImage","listStyleImage"]};INSTART.registerInit(function(a){"apiDomain"in a&&(INSTART.common.apiDomain=
a.apiDomain);"virtualDomains"in a&&(INSTART.common.virtualDomains=a.virtualDomains)});INSTART.common.absPath=function(a){var d=INSTART.common.getOldFcn(c.createElement).call(c,"A");d.href=a;return d.href};INSTART.common.getDomain=function(a){var d=INSTART.common.getOldFcn(c.createElement).call(c,"A");d.href=a;return d.hostname};INSTART.common.getProtocolAndHost=function(a){var d=INSTART.common.getOldFcn(c.createElement).call(c,"A");d.href=a;return d.protocol+"//"+d.host};INSTART.common.apiDomain=
"api.insnw.net";INSTART.common.virtualDomains=4;INSTART.common.serviceUrl=function(a){return INSTART.common.apiDomain+a};INSTART.common.vHostServiceUrl=function(a){var d=INSTART.common.apiDomain;if(2>INSTART.common.virtualDomains)a="";else{for(var g=0,b=0;b<a.length;b++)var q=a.charCodeAt(b),g=(g<<5)-g+q,g=g&g;a=((g&2147483647)%INSTART.common.virtualDomains).toString()}""==a?d=["//",d].join(""):(g=d.split("."),d=2<g.length?["//",g.shift(),a,".",g.join(".")].join(""):["//",d].join(""));return d};INSTART.common.isNodeAndFake=
function(a){return a&&INSTART.common.isFakeNode(a)};var k=INSTART.common,e=null,a=function(a,d,g){for(var b;INSTART.common.isNodeAndFake(g=g[d]);)b=g;b&&(a[d].get=function(){return INSTART.common.interceptObj(b[d])})};INSTART.common.MutationObserverWrapper=function(b){var d=function(d,g){var q=[];d.forEach(function(d){q.push(INSTART.common.wrapObject(d,function(d,g){a(g,"previousSibling",d);a(g,"nextSibling",d);return g}))});b(q,g)};if(this===window)return INSTART.console.log("TRACE: invoking MutationObserver w/ wrapped CallBack"),
INSTART.common.interceptObj(INSTART.common.MutationObserver(function(a,g){d(a,INSTART.common.interceptObj(g))}));INSTART.console.log("TRACE: creating wrapped MutationObserver");var g=INSTART.common.interceptObj(new INSTART.common.MutationObserver(function(a){d(a,g)}));return g};["MutationObserver","MozMutationObserver","WebKitMutationObserver"].forEach(function(a){var d=window[a];"function"===typeof d&&(e||(INSTART.console.log("using "+a),e=d),INSTART.registerInit(function(d){d.wrap&&(window[a]=INSTART.common.MutationObserverWrapper)}))});
k.MutationObserver=e;INSTART.common.loadJSDynamically=function(a,d){var g=document.createElement("script");g.type="text/javascript";g.readyState?g.onreadystatechange=function(){if("loaded"==g.readyState||"complete"==g.readyState)g.onreadystatechange=null,d()}:g.onload=function(){d()};g.src=a;c.getElementsByTagName("head")[0].appendChild(g)};INSTART.common.getConfigRegexList=function(a,d,g){if(d in a)if(g.length=0,"object"===typeof a[d])for(var b=0;b<a[d].length;b++){var q=a[d][b];if("string"===typeof q)g.push(RegExp(q));
else throw"Invalid virtualizeDomains value type: "+typeof q;}else throw"Invalid value for virtualizeDomains";};INSTART.common.getStyleAsString=function(a){var d=j.getComputedStyle(a,null),g="",b;for(b in a.style)a=d[b],"function"!=typeof a&&(null!=a&&"undefined"!=typeof a)&&(g+=b+":"+a+";");return g};INSTART.common.addItemMethod=function(a){a.item=function(a){return this[a]};return a};INSTART.common.isNativeMethod=function(a){return-1<a.toString().indexOf("[native code]")?!0:!1};INSTART.beacon.register("interceptableImagesPresent");
j.addEventListener("load",function(){INSTART.beacon.set("interceptableImagesPresent",l())},!1);INSTART.beacon.register("imgstats");var q=0,r=0,s={},u=!1;j.addEventListener("load",function(){setTimeout(function(){0==q&&!u&&(INSTART.beacon.set("imgstats",INSTART.common.imageReport()),u=!0)},5E3)},!1);INSTART.common.registerImgStatsUrl=function(a){"undefined"===typeof s[a]&&(q++,s[a]={"static":0,backfill:0,done:!1})};INSTART.common.imgStats=function(a,d,g){"undefined"!==typeof s[a]&&(a=s[a],a.done||
(a["static"]=d,a.backfill=g,a.done=!0,r++,r>=q&&!u&&setTimeout(function(){r>=q&&!u&&(INSTART.beacon.set("imgstats",INSTART.common.imageReport()),u=!0)},5E3)))};INSTART.common.imageReport=function(){var a={},d;for(d in s){var g=s[d],b=INSTART.common.getDomain(d);"undefined"===typeof a[b]&&(a[b]={partial_count:0,partial_bytes:0,static_count:0,static_bytes:0});b=a[b];b.static_count+=1;b.static_bytes+=g["static"];0<g.backfill&&(b.partial_count+=1,b.partial_bytes+=g.backfill)}return a}})(window,document);(function(j,c){INSTART.wrapper={};var l=function(a){return{value:function(){var b=INSTART.common.unwrap(this);INSTART.common.fixArgs(arguments);return INSTART.common.smartWrap(b[a].apply(b,arguments))}}};INSTART.common.protoFcnWrapper=l;INSTART.common.protoEventSystem=function(a,b){var e=INSTART.common.getEventSystem(a.nodeName);b.addEventListener={value:e.addEventListener};b.removeEventListener={value:e.removeEventListener}};INSTART.common.defaultStyleOverride=function(a,b){"style"in a&&(b.style=
{get:function(){var a=INSTART.common.unwrap(this);"undefined"===typeof a.__styleWrapper&&(a.__styleWrapper=INSTART.common.createStyleWrapper(a));return a.__styleWrapper},set:function(a){return INSTART.common.unwrap(this).__styleWrapper=INSTART.common.unwrap(a)}})};INSTART.common.defaultFamilyOverride=function(a,b){for(var e in INSTART.common.elementAttributes)e in a&&(b[e]=INSTART.common.elementAttributes[e])};INSTART.wrapper.attributesOverride=function(a,b){"attributes"in a&&(b.attributes={get:function(){return INSTART.NamedNodeMap.wrap(INSTART.common.unwrap(this).attributes)}})};
INSTART.common.defaultCustomProps=function(a,b){INSTART.common.defaultStyleOverride(a,b);INSTART.common.interceptInnerHTMLAttribute(a,b);INSTART.common.defaultFamilyOverride(a,b);INSTART.common.addDom0EventHandlers(a,b);INSTART.common.protoEventSystem(a,b);INSTART.wrapper.attributesOverride(a,b)};INSTART.common.defaultProtoWrapper=function(a,b){var e=INSTART.common.protoProperties();b(a,e);for(var c in a)if(!(c in e)){try{var h=typeof a[c]}catch(f){INSTART.common.handleExpectedExceptions(a,f),h=""}"function"===
h?INSTART.common.dontOverride(a[c])||(e[c]=l(c)):e[c]=function(){var a=c;return{get:function(){return INSTART.common.strictUnwrap(this)[a]},set:function(b){return INSTART.common.strictUnwrap(this)[a]=b}}}()}return Object.create(a,e)};var k={};INSTART.common.setElementProto=function(a,b){k[a]=b};INSTART.common.wrapDOMElement=function(a,b){var e;e=a.tagName;if(!(e in k)){var h=INSTART.common.getOldFcn(c.createElement).call(c,e);k[e]=INSTART.common.defaultProtoWrapper(h,INSTART.common.defaultCustomProps)}e=
k[e];h=INSTART.common.protoWrapperProperties(a);e=Object.create(e,h);INSTART.common.setWrapper(a,e);INSTART.common.initEvents(a);INSTART.console.log("intercepting "+a.nodeName);if(!0===b)for(var h=INSTART.common.getRegisteredDom0Events(a),f=0;f<h.length;f++){INSTART.console.log("redefining dom0 event "+h[f]);var m=h[f];e[m]=a[m]}return e};var m=INSTART.common.getOldFcn(c.createAttribute).call(c,"src"),f=INSTART.common.defaultProtoWrapper(m,function(a,b){b.ownerElement={get:function(){return INSTART.common.interceptObj(INSTART.common.unwrap(this).ownerElement)},
set:function(a){return INSTART.common.unwrap(this).ownerElement=a}}}),h=function(a){this.__virt_value=a},n=function(){return this.__virt_value},b=function(){this._vmode=!0},e;e=Object.create(f,{value:{set:function(a){var b=INSTART.common.unwrap(this);b._setVirtValue(a);!0===this._vmode?b.ownerElement&&b.ownerElement._setSrcInternal&&b.ownerElement._setSrcInternal(a):b.value=a;return a},get:function(){return INSTART.common.unwrap(this)._getVirtValue()}}});INSTART.common.wrapAttrNode=function(a){if("SRC"==
a.name.toUpperCase()){var c=INSTART.common.protoWrapperProperties(a),c=Object.create(e,c);INSTART.common.setWrapper(a,c);a._setVirtValue=h;a._getVirtValue=n;a._enable_virt=b;a._setVirtValue(a.value);return c}c=INSTART.common.protoWrapperProperties(a);c=Object.create(f,c);INSTART.common.setWrapper(a,c);return c}})(window,document);(function(j,c){INSTART.common.handleExpectedExceptions=function(a,b){a instanceof HTMLInputElement?INSTART.console.log("IGNORED ERROR: "+b):a instanceof HTMLVideoElement?INSTART.console.log("IGNORED ERROR: "+b):a instanceof HTMLAudioElement?INSTART.console.log("IGNORED ERROR: "+b):a instanceof SVGElement?INSTART.console.log("IGNORED ERROR: "+b):console.error(b)};INSTART.common.getObjectProperties=function(a){var b={},d;for(d in a){try{if("function"==typeof a[d])continue}catch(e){INSTART.common.handleExpectedExceptions(a,
e)}b[d]={};b[d].get=function(){var a=d;return function(){var C=INSTART.common.unwrap(this)[a];return z(C)}}();b[d].set=function(){var a=d;return function(C){return INSTART.common.unwrap(this)[a]=C}}()}return b};var l={childNodes:function(a){return a.childNodes}},k=function(a){for(;;)if(a=a.nextSibling,!a||!INSTART.common.isFakeNode(a))return a},m=function(a){for(;;)if(a=a.previousSibling,!a||!INSTART.common.isFakeNode(a))return a},f=function(a){(a=a.parentNode)&&INSTART.common.isFakeNode(a)&&(a=null);
return a},h=function(a){(a=a.parentElement)&&INSTART.common.isFakeNode(a)&&(a=null);return a},n=function(a){a=a.lastChild;return!a||!INSTART.common.isFakeNode(a)?a:m(a)},b=function(a){a=a.firstChild;return!a||!INSTART.common.isFakeNode(a)?a:k(a)},e=function(a){return a};INSTART.common.elementAttributes={nextSibling:{get:function(){return INSTART.common.interceptObj(k(INSTART.common.unwrap(this)))},set:e},previousSibling:{get:function(){return INSTART.common.interceptObj(m(INSTART.common.unwrap(this)))},
set:e},parentNode:{get:function(){return INSTART.common.interceptObj(f(INSTART.common.unwrap(this)))},set:e},parentElement:{get:function(){return INSTART.common.interceptObj(h(INSTART.common.unwrap(this)))},set:e},lastChild:{get:function(){return INSTART.common.interceptObj(n(INSTART.common.unwrap(this)))},set:e},firstChild:{get:function(){return INSTART.common.interceptObj(b(INSTART.common.unwrap(this)))},set:e},childNodes:{get:function(){return INSTART.HtmlCollection.wrap(INSTART.common.unwrap(this).childNodes)},
set:e}};var a={};a.nextSibling=k;a.previousSibling=m;a.parentNode=f;a.parentElement=h;a.lastChild=n;a.firstChild=b;INSTART.common.getObjectElementProperties=function(b,d){var e=d||{},g;for(g in a)e[g]={},e[g].get=function(){var b=g;return function(){return INSTART.common.interceptObj(a[b](INSTART.common.unwrap(this)))}}(),e[g].set=function(){var a=g;return function(b){return INSTART.common.unwrap(this)[a]=b}}();for(g in l)e[g]={},e[g].get=function(){var a=g;return function(){return INSTART.common.wrapList(l[a](INSTART.common.unwrap(this)))}}(),
e[g].set=function(){var a=g;return function(b){return INSTART.common.unwrap(this)[a]=b}}();b.nodeName&&"FORM"===b.nodeName&&(e.elements.get=function(){return INSTART.common.wrapList(INSTART.common.unwrap(this).elements)},e.elements.set=function(a){return INSTART.common.unwrap(this).elements=a});return e};INSTART.common.wrapProto=function(a,b,g,e){var d=a[b];if("undefined"!==typeof d){var c;c="function"===typeof e?function(){e(arguments);INSTART.common.fixArgs(arguments);return g(d.apply(INSTART.common.unwrap(this),
arguments))}:"function"===typeof g?function(){INSTART.common.fixArgs(arguments);return g(d.apply(INSTART.common.unwrap(this),arguments))}:function(){INSTART.common.fixArgs(arguments);return d.apply(INSTART.common.unwrap(this),arguments)};INSTART.common.markDontOverride(c,d);a[b]=c}};var q=["target","currentTarget","srcElement"],r=function(a){if(null==a||"undefined"==typeof a)return a;var b=INSTART.common.getWrapper(a);return"undefined"!=typeof b?b:"undefined"!==typeof a.__wrap?a.__wrap(a):b=INSTART.common.wrapObject(a,
function(a,b){for(var d=0;d<q.length;d++)(function(d){b[d]={get:function(){return INSTART.common.interceptObj(a[d])},set:function(a){return a}}})(q[d]);return b})};INSTART.common.wrapEvent=r;INSTART.common.initEvents=function(a){a.__eventList={}};var s=function(a){INSTART.console.log("event handler "+this.nodeName+" "+a.type);for(var b=a.type,d=INSTART.common.interceptObj(this),b=this.__eventList[b],g=0;g<b.length;g++)"function"==typeof b[g]?b[g].call(d,r(a)):b[g].handleEvent.call(b[g],r(a))};INSTART.common.default_EventHandler=
s;var u=function(a,b){var d=INSTART.common.unwrap(this);if("undefined"==typeof d.__eventList[a]){d.__eventList[a]=[];var g=INSTART.common.getEventSystem(d.nodeName).realNodeEventHandlers[a];"undefined"==typeof g&&(g=s);d.addEventListener(a,g)}d.__eventList[a].push(b)},t=function(a,b){var d=INSTART.common.unwrap(this),g=d.__eventList[a],e=[];if(g){for(var c=0;c<g.length;c++)g[c]!=b&&e.push(g[c]);d.__eventList[a]=e}},d={};d.addEventListener=u;d.removeEventListener=t;d.realNodeEventHandlers={};var g=
{};INSTART.common.registerEventSystem=function(a,b,d,e){var c={};c.realNodeEventHandlers=b;c.addEventListener=d||u;c.removeEventListener=e||t;g[a]=c};INSTART.common.getEventSystem=function(a){a=g[a];"undefined"==typeof a&&(a=d);return a};INSTART.common.enableEventHandling=function(a){if("undefined"!=typeof a.__eventList)return a;var b=INSTART.common.unwrap(this);INSTART.common.initEvents(b);b=INSTART.common.getEventSystem(a.nodeName);a.addEventListener=b.addEventListener;a.removeEventListener=b.removeEventListener};
for(var e=["NodeList","HtmlCollection"],y=[],v=0;v<e.length;v++)"undefined"!==typeof window[e[v]]&&y.push(window[e[v]]);var z=function(a){if("object"==typeof a){if(a instanceof INSTART.common.baseClass)return INSTART.common.interceptObj(a);for(var b=0;b<y.length;b++)if(a instanceof y[b])return INSTART.common.wrapList(a)}return a};INSTART.common.smartWrap=z;var p=function(a,b){var d=b[a];return function(){INSTART.common.fixArgs(arguments);return z(d.apply(b,arguments))}};INSTART.common.getRegisteredDom0Events=
function(a){var b=[];a=a.attributes;for(var d=0;d<a.length;++d){var g=a[d].name;g in INSTART.common.dom0Handlers&&b.push(g)}return b};INSTART.common.interceptInnerHTMLAttribute=function(a,b){"innerHTML"in a&&(b.innerHTML={get:function(){var a=INSTART.common.unwrap(this);INSTART.console.log("TRACE :get innerHTML for "+a);return a.innerHTML},set:function(a){var b=INSTART.common.unwrap(this);INSTART.console.log("TRACE :set innerHTML for "+b);a=b.innerHTML=a;var d={};d[INSTART.events.changeType]=INSTART.events.changeTypeHtmlObjectProperty;
d[INSTART.events.changedProperty]=INSTART.events.innerHTML;d=INSTART.events.getCustomEvent(INSTART.events.subtreeChange,d);b.dispatchEvent(d);return a}})};var x={};INSTART.common.clearWrapObjectStats=function(){x={}};INSTART.common.logWrapObjectStats=function(){for(var a in x)INSTART.console.log("type: "+a+" calls: "+x[a])};INSTART.common.wrapObject=function(a,b){if(!a||INSTART.common.isWrapper(a))return a;if(INSTART.common.hasWrapper(a))return INSTART.common.getWrapper(a);var d=a.toString();d in
x||(x[d]=0);x[d]+=1;INSTART.console.log("wrapObject "+a);INSTART.common.logWrapObjectStats();d=INSTART.common.getObjectProperties(a);d=INSTART.common.getObjectElementProperties(a,d);if(a.style){var g=INSTART.common.createStyleWrapper(a);d.style={get:function(){INSTART.console.log("Get wrapped style object");return g},set:function(){}}}INSTART.common.addDom0EventHandlers(a,d);"function"===typeof b&&(d=b(a,d));INSTART.common.interceptInnerHTMLAttribute(a,d);INSTART.common.addWrapperProperty(a,d);d=
Object.create(a,d);INSTART.common.setWrapper(a,d);for(var e in a){try{if("function"!=typeof a[e])continue}catch(c){INSTART.common.handleExpectedExceptions(a,c);continue}INSTART.common.dontOverride(a[e])||/^on/.test(e)&&e.substring(2)in INSTART.common.onStarAttrs||(d[e]=p(e,a))}return d};var A=INSTART.common.unwrap(c.createElement("A")).style,B=[];INSTART.common.addStyleHook=function(a){B.push(a)};var e=function(a){var b={},d="__"+a;b.get=function(){if("undefined"===typeof this[d]){var b=INSTART.common.unwrapProtoWrapper(this);
if(null==b)debugger;this[d]=b[a]}return this[d]};b.set=function(b){var g=INSTART.common.unwrapProtoWrapper(this),e=this.__domNode;this[d]=b;for(var c=!0,h=0;h<B.length;h++)c&=(0,B[h])(e,g,a,b);c&&(g[a]=b);return b};return b},D,v=INSTART.common.protoProperties(),w;for(w in A)if(!("function"===typeof A[w]||w in INSTART.common.styleImageChangerMap)){if(0==w.indexOf("webkit")){var E=w[0].toUpperCase()+w.substring(1);v[E]=function(){var a=E;return{get:function(){return INSTART.common.unwrap(this)[a]},
set:function(b){return INSTART.common.unwrap(this)[a]=b}}}()}v[w]=function(){var a=w;return{get:function(){return INSTART.common.unwrap(this)[a]},set:function(b){return INSTART.common.unwrap(this)[a]=b}}}()}for(w in INSTART.common.styleImageChangerMap)v[w]=e(w);D=Object.create(A,v);INSTART.common.createStyleWrapper=function(a){var b=INSTART.common.protoWrapperProperties(a.style);b.__domNode={value:a,writable:!1,enumerable:!1};b=Object.create(D,b);INSTART.common.setWrapper(a.style,b);return b};INSTART.common.addDom0EventHandlers=
function(a,b){for(var d in INSTART.common.dom0Handlers)b[d]=function(){var a=d,b="__dom0_"+a;return{get:function(){INSTART.console.log("getting dom0 "+a);return this[b]||null},set:function(d){INSTART.console.log("setting dom0 "+a+" for "+this+"  to "+d);"function"!==typeof d&&(d=null);"undefined"===typeof this[b]?(Object.defineProperty(this,b,{value:d,enumerable:!1,writable:!0}),INSTART.common.unwrap(this)[a]=function(d){var g=INSTART.common.getWrapper(this);"function"===typeof g[b]&&(INSTART.console.log("DEBUG: handling "+
a),g[b].call(g,d))}):this[b]=d;return d}}}();return b};var H=c.createTreeWalker;INSTART.common.TreeWalker=function(a,b){var d=H.call(c,a,NodeFilter.SHOW_ELEMENT,null,!1);do b.call(d.currentNode);while(d.nextNode())};INSTART.common.fixArgs=function(a){if(a)for(var b=0;b<a.length;b++){var d=a[b];INSTART.common.isWrapper(d)&&(d=INSTART.common.unwrap(d),delete a[b],a[b]=d)}};INSTART.common.backtrace=function(){};var F={};INSTART.common.addNodeInterceptor=function(a,b){F[a]=b};INSTART.common.interceptObj=
function(a,b){if(!a)return a;var d=a.__wrapper;if("undefined"!=typeof d)return d;if(INSTART.common.isNonInterceptedObject(a))return a;if(INSTART.common.isWrapper(a))return INSTART.nologging||INSTART.console.error("should get unwrapped object"),a;1==a.nodeType?(d=F[a.nodeName],null!=d&&"undefined"!=typeof d?(INSTART.console.log("wrapping obj: "+a),d=d(a),INSTART.common.setWrapper(a,d)):(INSTART.console.log("wrapping obj: "+a),d=INSTART.common.wrapDOMElement(a,!0===b))):2===a.nodeType?d=INSTART.common.wrapAttrNode(a):
11===a.nodeType?d=INSTART.DocumentFragment.wrap(a):a instanceof NodeList?d=INSTART.NodeList.wrap(a):(INSTART.console.log("wrapping non element "+a+" falling back to legacy wrapper"),d=INSTART.common.wrapObject(a),INSTART.common.enableEventHandling(d));return d};INSTART.common.wrapList=function(a){if(a instanceof NodeList)return INSTART.NodeList.wrap(a);if(a instanceof HTMLCollection)return INSTART.HtmlCollection.wrap(a);a instanceof Array||INSTART.console.log("Wrapping non-Array as an Array:\t"+typeof a);
for(var b=[],d=0;d<a.length;d++)INSTART.common.isFakeNode(a[d])||b.push(INSTART.common.interceptObj(a[d]));return b};INSTART.common.assignDataUri=function(a,b){a.removeAttribute("crossOrigin");INSTART.common.changeImageSrc(a,b,a._getActualSrc())};var G=function(a){return"("+a.left+","+a.top+") to ("+a.right+","+a.bottom+")"};INSTART.common.changeImageSrc=function(a,b,d){var g,e;if("undefined"!=typeof d&&""!=d&&a.offsetParent){INSTART.console.log("creating overlay for "+INSTART.image2.getuid(a)+" "+
a._src_attr_node.__virt_value);g=a;var h=0;e=0;if(g.offsetParent){do h+=g.offsetLeft,e+=g.offsetTop;while((g=g.offsetParent)&&"static"==INSTART.common.getOldFcn(j.getComputedStyle).call(j,g,null).position)}h+=c.body.scrollLeft;e+=c.body.scrollTop;INSTART.console.log("Position of img "+h+"  "+e);g=h;var p=INSTART.common.getOldFcn(a.cloneNode).call(a,!1);p.style.cssText=INSTART.common.getStyleAsString(a);p.id="";p.className="";INSTART.common.markFake(p);a.addEventListener("load",function(){INSTART.console.log("image loaded, preparing to remove overlay "+
INSTART.image2.getuid(a)+" "+a._src_attr_node.__virt_value);p.style.opacity="0.5";setTimeout(function(){INSTART.console.log("removing overlay "+INSTART.image2.getuid(a)+" "+a._src_attr_node.__virt_value);p.parentNode?(INSTART.console.log("removing newImg"),p.parentNode.removeChild(p)):a.parentNode?INSTART.console.error("newImg is not exposed to code but still missing before me"):INSTART.console.log("both removed")},1E3*INSTART.image2.overlayImageTimeOutSeconds);this.removeEventListener("load",arguments.callee)});
p.src=d;p.style.position="absolute";p.style.top=e+"px";p.style.left=g+"px";p.addEventListener("load",function(){INSTART.console.log("In newImage load handler");if(a.parentNode){a.parentNode.insertBefore(p,a);var g=a.getBoundingClientRect(),e=p.getBoundingClientRect();0.5<Math.abs(g.top-e.top)||0.5<Math.abs(g.bottom-e.bottom)||0.5<Math.abs(g.left-e.left)||0.5<Math.abs(g.right-e.right)?INSTART.console.error("Overlay IS NOT correct for "+d+" orig: "+G(g)+" overlay: "+G(e)):INSTART.console.log("DEBUG : Overlay IS correct ")}else INSTART.console.log("realImg orphaned, giving up!");
INSTART.console.log("overlay loaded, setting src for "+INSTART.image2.getuid(a)+" "+a._src_attr_node.__virt_value);a.isVirtualLoadHanlderEnabled=!0;a.src=b})}else INSTART.console.log("IMMEDIATE setting src for "+INSTART.image2.getuid(a)+" "+a._src_attr_node.__virt_value),a.isVirtualLoadHanlderEnabled=!0,a.src=b};INSTART.common.overrideEventsOnPrototype=function(a){var b=a.addEventListener;a.addEventListener=function(a,d,g){"undefined"===typeof this.eventMap&&(this.eventMap=[]);var e=this.eventMap,
c=null;"function"===typeof d?c=function(a){d.call(INSTART.common.interceptObj(this),INSTART.common.wrapEvent(a))}:"handleEvent"in d&&(c=function(a){d.handleEvent.call(INSTART.common.interceptObj(this),INSTART.common.wrapEvent(a))});null!=c&&(b.call(this,a,c,g),(g=e[a])||(g=e[a]=[]),g.push({listener:d,trampoline:c}))};var d=a.removeEventListener;a.removeEventListener=function(a,b){"undefined"===typeof this.eventMap&&(this.eventMap=[]);var g=this.eventMap,e=g[a];if(e){for(var c=[],h=0;h<e.length;h++)e[h].listener==
b?d.call(this,a,e[h].trampoline):c.push(e[h]);g[a]=c}}};INSTART.common.isNonInterceptedObject=function(a){return!a?!0:!!a.nodeName&&("BODY"==a.nodeName||"HEAD"==a.nodeName||"HTML"==a.nodeName)||a===j||a===c};INSTART.registerInit(function(a){if(a.wrap){a="getPropertyCSSValue getPropertyPriority getPropertyShorthand getPropertyValue isPropertyImplicit item removeProperty setProperty".split(" ");for(var b=Object.getPrototypeOf(A),d=0;d<a.length;d++){var g=a[d];g in A&&(INSTART.console.log("overriding CSSStyleDeclaration.prototype."+
g),b[g]=function(){var a=b[g];b["old_"+g]=a;return function(){if(INSTART.common.isWrapper(this))return a.apply(INSTART.common.unwrapProtoWrapper(this),arguments);INSTART.console.error("out of wrapping detected");return a.apply(this,arguments)}}())}var e=j.getComputedStyle;"function"===typeof e&&(Window.prototype.getComputedStyle=function(){return Object.create(D,INSTART.common.protoWrapperProperties(e.apply(this,arguments)))})}})})(window,document);(function(){if("undefined"==typeof INSTART||!INSTART)INSTART={};if("undefined"==typeof INSTART.base64||!INSTART.base64)INSTART.base64={};for(var j=[],c=[],l=0;127>l;l++)j.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)),c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(String.fromCharCode(l)));INSTART.base64.encodebin=function(c){for(var m=[],f=c.length,h=0;;){var l=c[h++],b=c[h++],e=c[h++],a=l>>2,l=(l&3)<<4|b>>4,q=(b&15)<<2|e>>6,
r=e&63;if(f<=h){isNaN(b)?q=r=64:isNaN(e)&&(r=64);m.push(j[a]+j[l]+j[q]+j[r]);break}m.push(j[a]+j[l]+j[q]+j[r])}return m.join("")};INSTART.base64.decodebin=function(k){var m,f,h="",j,b="",e=0;/[^A-Za-z0-9\+\/\=]/g.exec(k)&&INSTART.console.log("invalid base64 characters");k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"");var a=[];do m=c[k.charCodeAt(e++)],f=c[k.charCodeAt(e++)],j=c[k.charCodeAt(e++)],b=c[k.charCodeAt(e++)],m=m<<2|f>>4,f=(f&15)<<4|j>>2,h=(j&3)<<6|b,a.push(m),64!=j&&a.push(f),64!=b&&a.push(h);while(e<
k.length);return a}})(window,document);INSTART.imageApi={};
(function(j,c){if("undefined"==typeof INSTART.image2||!INSTART.image2)INSTART.image2={};INSTART.image2.dummyApi="/instart/image/0/dummy/";INSTART.image2.jpegAlpha="/instart/image/0/api/";INSTART.image2.profileUrl="/instart/profile/0/";INSTART.image2.partial="/instart/image/0/partial/";INSTART.imageApi.originalApi="/instart/image/0/orig/";INSTART.image2.streamjpeg=0;INSTART.image2.streamingPollInterval=2E3;INSTART.image2.useOptDisableHook=!0;var l=0,k=[];INSTART.image2.addImagePartHandler=function(a){k.push(a)};
INSTART.registerInit(function(a){a.enableImageVirtualization&&(setInterval(function(){if(0==l)for(var a=k,a=[],b=0;b<a.length;b++){var d=a[b];d.method.apply(d.context,d.args)}},INSTART.image2.streamingPollInterval),INSTART.common.getOldFcn(j.addEventListener).call(j,"DOMNodeRemoved",f,!1),INSTART.common.getOldFcn(j.addEventListener).call(j,"DOMContentLoaded",h,!1))});INSTART.image2.reqCache={};INSTART.image2.reqCache._cache={};INSTART.image2.reqCache.set=function(a){INSTART.image2.reqCache._cache[a]=
"dummy"};INSTART.image2.reqCache.tag=function(a){INSTART.image2.reqCache._cache[a]="tag"};INSTART.image2.reqCache.get=function(a){return INSTART.image2.reqCache._cache.hasOwnProperty(a)?INSTART.image2.reqCache._cache[a]:""};INSTART.image2.isJpegStream=function(){return INSTART.image2.streamjpeg};INSTART.image2.isJpeg=function(a){return 255==a[0]&&216==a[1]};INSTART.image2.isCompleteJpeg=function(a){if("undefined"===typeof a.length)throw"Invalid type provided to isCompleteJpeg";if(2>a.length)return INSTART.console.log("buf len < 2"),
!1;var b=a[a.length-1];return 255==a[a.length-2]&&217==b};var m=function(a){a=INSTART.common.unwrap(a);a=INSTART.common.getOldFcn(a.getElementsByTagName).call(a,"IMG");for(var b=0;b<a.length;b++){var e=a[b];""!=e.src&&!/^data:/.test(e.src)&&(INSTART.console.log("TRACE: adding static tag uri "+e.src),INSTART.image2.reqCache.tag(e.src))}},f=function(a){INSTART.console.log("TRACE: dom node removed event on "+a.target.nodeName);"#text"==a.target.nodeName||"#comment"==a.target.nodeName||m(a.target)};INSTART.prof.scrapeStaticTagsMs=
0;var h=function(){var a=(new Date).valueOf();INSTART.console.log("TRACE: load handler getting image tags");m(document);INSTART.prof.scrapeStaticTagsMs=(new Date).valueOf()-a;INSTART.console.log("TRACE: load handler done, total ms "+INSTART.prof.scrapeStaticTagsMs);j.removeEventListener("DOMNodeRemoved",f,!1)},n=function(a,b,e){if(/^$/.test(b))throw"Cannot get api url of empty url";b={resource_id:{id_type:"relative",relative_id:{base:location.href,resource:b}}};if(e)for(var d in e)if("undefined"==
typeof b[d])b[d]=e[d];else throw"Overrriding parameter already defined";a+=encodeURIComponent(INSTART.common.json.stringify(b));return INSTART.common.vHostServiceUrl(a)+a};INSTART.image2.getDummyImgUrl=function(a){return n(INSTART.image2.dummyApi,a,{})};INSTART.image2.getImageApiUrl=function(a){return n(INSTART.image2.jpegAlpha,a,{})};INSTART.imageApi.getOriginalApiUrl=function(a){return n(INSTART.imageApi.originalApi,a,{})};if("undefined"==typeof INSTART.datauri||!INSTART.datauri)INSTART.datauri=
{};INSTART.datauri.getBase64DataUri=function(a,b){return"data:"+b+";base64,"+INSTART.base64.encodebin(a)};INSTART.datauri.appendToImage=function(a,b){var e="",d=a.length;"="==a[a.length-1]&&(d-=4,e=a.substring(d));for(var e=INSTART.base64.decodebin(e),g=0;g<b.length;g++)e.push(b[g]);return a.substring(0,d)+INSTART.base64.encodebin(e)};INSTART.common.cacheSize=0;var b={},e={},a=0,q=function(a,b){return{cancel:function(){if(null!=a){var c=e[a];"undefined"===typeof c?INSTART.console.error("called cancel on invalid url "+
a+" id "+b):delete c[b]}}}};INSTART.imageApi.fetchImage=function(h,f){var k=b["api:"+h];if(k)return setTimeout(function(){f(k)},1),INSTART.console.log("fetchImage got cached data for "+h),new q(null,null);var d=e[h],g=a++;if("undefined"==typeof d){INSTART.console.log("fetchImage creating xhr for "+h);d=e[h]={};l++;var j=INSTART.image2.getImageApiUrl(h);INSTART.loader.fetchData(j,function(a,g,p){l--;if(200!=p)INSTART.console.error("Failed to retrieve "+h),delete e[h];else{var f=function(a){b["api:"+
h]=a;INSTART.common.cacheSize+=a.length;for(var g in d)(0,d[g])(a);delete e[h]};g=new Uint8Array(a);if(0==g[0]){p=g[1];var q=new Uint8Array(a,2,p);g="";for(var k=0;k<p;k++)g+=String.fromCharCode(q[k]);a=new Uint8Array(a,2+p);a=INSTART.datauri.getBase64DataUri(a,g);f(a)}else if(1==g[0]){p=g[1]|g[2]<<8|g[3]<<16|g[4]<<24;g=new Uint8Array(a,5,p);a=new Uint8Array(a,5+p);var j=INSTART.datauri.getBase64DataUri(g,"image/png");a=INSTART.datauri.getBase64DataUri(a,"image/jpeg");g=new INSTART.image2.RealImage;
g.addEventListener("load",function(){var a=INSTART.common.getOldFcn(c.createElement).call(c,"canvas"),b=INSTART.common.getOldFcn(a.getContext).call(a,"2d");a.height=this.height;a.width=this.width;INSTART.common.getOldFcn(b.drawImage).call(b,this,0,0);var d=new INSTART.image2.RealImage;d.addEventListener("load",function(){b.globalCompositeOperation="xor";INSTART.common.getOldFcn(b.drawImage).call(b,this,0,0);var d=INSTART.common.getOldFcn(a.toDataURL).call(a);f(d)},!1);d.src=j},!1);g.src=a}else{INSTART.console.error("Image API returned wrong type or error");
debugger}}})}else INSTART.console.log("fetchImage folding req for "+h);d[g]=f;return new q(h,g)};var r={};INSTART.image2.disableOpts=function(a){if(INSTART.image2.useOptDisableHook){var b=window.location.href;if(!(b in r)){r[b]=!0;INSTART.console.log("disabling opts for page "+b);var e="//"+INSTART.common.apiDomain+INSTART.image2.profileUrl,d=new XMLHttpRequest,b=JSON.stringify({id:"html",data:{uri:b}});d.open("POST",e);d.send(b);d.onload=function(){INSTART.console.log("post sent, got response code "+
d.status);a()};d.onerror=function(){INSTART.console.log("post sent, got error, code "+d.status);a()}}}};INSTART.image2.handlePartialFragment=function(a,b,e){var d;INSTART.image2.isJpeg(a)?d=a:(d=new Uint8Array(b.length+a.length),d.set(b,0),d.set(a,b.length));a=INSTART.datauri.getBase64DataUri(d,"image/jpeg");e(a,d)};INSTART.image2.fetchPartialFragment=function(a,b,e){b=n(INSTART.image2.partial,a,{offset:b});INSTART.console.log("in fetch partial fragment: "+a);INSTART.loader.fetchData(b,function(a,
b,c){0==c||!a?INSTART.console.log("error in fetchImage"):(a=new Uint8Array(a,0),e.call(this,a))})}})(window,document);(function(){if("undefined"==typeof INSTART||!INSTART)INSTART={};if("undefined"==typeof INSTART.loader||!INSTART.loader)INSTART.loader={};var j=function(c,j,k,m){var f=new XMLHttpRequest;m&&(m._XMLHttpRequest=f);f.open("GET",c);f.withCredentials=!!k;f.onreadystatechange=function(){(!m||m._XMLHttpRequest===this)&&(4==f.readyState&&f.response instanceof ArrayBuffer)&&j(f.response,f.getResponseHeader("content-type"),f.status)};f.responseType="arraybuffer";f.send(null)};INSTART.loader.fetchData=j;INSTART.loader.fetchImageData=
"msie"===INSTART.device.info.browser.name?function(c,j){INSTART.iframerpc.getImageData(c,j)}:function(c,l){j(c,l,!1)};INSTART.loader.fetchCachedImageAsBinary=function(c,l){j(c,l,!1)};INSTART.loader.fetchBinary=function(c,l){j(c,l,!0)}})(window,document);(function(){"undefined"==typeof INSTART&&(INSTART={});INSTART.canvas2d={};INSTART.registerInit(function(j){if(j.wrap){var c=function(a,b,g){this.operationQueue.push({method:a,args:b,context:g})},l=function(){INSTART.console.log("CANVAS: running queued ops ("+this.operationQueue.length+")");this.replayingOps=!0;var a=this.operationQueue;this.operationQueue=[];var b;for(b=0;b<a.length&&!this.stopReplayCondition();b++){var g=a[b];g.method.apply(g.context,g.args)}for(b+=1;b<a.length;b++)this.operationQueue.push(a[b]);
INSTART.console.log("CANVAS: remaining "+this.operationQueue.length);this.replayingOps=!1},k=function(a,b){a.operationQueue=[];a.queueOperation=c;a.replayOperations=l;"undefined"==typeof b&&(b=function(){return!1});a.stopReplayCondition=b},m="globalAlpha globalCompositeOperation strokeStyle fillStyle shadowOffsetX shadowOffsetY shadowBlur shadowColor lineWidth lineCap lineJoin miterLimit font textAlign textBaseline".split(" "),f=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=
function(a){if("2d"==a){var b=INSTART.common.unwrap(this),b=f.apply(b,arguments);if(INSTART.common.hasWrapper(b))return INSTART.common.getWrapper(b);b.shadowCanvas||(b.shadowCanvas=INSTART.common.getOldFcn(document.createElement).call(document,"canvas"),INSTART.common.isWrapper(b.shadowCanvas)&&(b.shadowCanvas=INSTART.common.unwrap(b.shadowCanvas)),b.shadowContext=f.apply(b.shadowCanvas,arguments),k(b,function(){return this.canvas.waiting}));return INSTART.common.wrapObject(b,function(a,b){for(var d=
0;d<m.length;d++)(function(){var a=m[d];b[a]={get:function(){INSTART.console.log("CANVAS: attribute get "+a);return INSTART.common.unwrap(this).shadowContext[a]},set:function(b){INSTART.console.log("CANVAS: attribute set "+a+" = "+b);var d=INSTART.common.unwrap(this);d.replayingOps?INSTART.console.log("CANVAS: in replay, skipping shadow update"):(INSTART.console.log("CANVAS: applying attribute update to shadow"),d.shadowContext[a]=b);d.canvas.waiting?d.operationQueue.push({method:function(){INSTART.console.log("CANVAS: delayed attribute set "+
a+" = "+b);d[a]=b},args:arguments,context:this}):(INSTART.console.log("CANVAS: immediate attribute set "+a+" = "+b),d[a]=b)}}})();return b})}return f.apply(this,arguments)};INSTART.common.markDontOverride(HTMLCanvasElement.prototype.getContext,f);var h=CanvasRenderingContext2D.prototype,n={save:!0,restore:!0,scale:!0,rotate:!0,translate:!0,transform:!0,setTransform:!0,resetTransform:!0,clearRect:!1,fillRect:!1,strokeRect:!1,beginPath:!0,closePath:!0,moveTo:!0,lineTo:!0,quadraticCurveTo:!0,bezierCurveTo:!0,
arcTo:!0,rect:!0,arc:!0,fill:!0,stroke:!0,drawSystemFocusRing:!1,drawCustomFocusRing:!1,scrollPathIntoView:!1,clip:!0,fillText:!1,strokeText:!1,rotateText:!1},b;for(b in n)j=h[b],h[b]=function(){var a=b,d=n[a],g=h[b];return function(){INSTART.console.log("CANVAS: CanvasRenderingContext2D."+a+" "+arguments);var b=INSTART.common.unwrap(this);d&&!b.replayingOps&&(b.replayingOps?INSTART.console.log("CANVAS: In replay, skipping shadow op "+a):(INSTART.console.log("CANVAS: Applying "+a+" to shadow"),g.apply(b.shadowContext,
arguments)));b.canvas.waiting?(INSTART.console.log("CANVAS: queuing CanvasRenderingContext2D."+a+" "+arguments),b.operationQueue.push({method:arguments.callee,args:arguments,context:this})):(INSTART.console.log("CANVAS: applying CanvasRenderingContext2D."+a+" "+arguments),g.apply(b,arguments))}}(),INSTART.common.markDontOverride(h[b],j);var e=h.createImageData;h.createImageData=function(){var a=INSTART.common.unwrap(this);arguments.length&&INSTART.common.isWrapper(arguments[0])&&INSTART.common.fixArgs(arguments);
e.apply(a,arguments)};INSTART.common.markDontOverride(h.createImageData,e);var a=h.putImageData;h.putImageData=function(){var b=INSTART.common.unwrap(this);INSTART.console.log("CANVAS: running putImageData");if(b.canvas.waiting)INSTART.console.log("CANVAS: canvas waiting, queuing draw op"),b.queueOperation(arguments.callee,arguments,b);else{var d=arguments[0];if(INSTART.common.isWrapper(d)){if(d.waiting){INSTART.console.log("CANVAS: image data waiting, queuing ops");b.canvas.waiting=!0;b.queueOperation(arguments.callee,
arguments,b);var g=b;d.queueOperation(function(){g.canvas.waiting=!1;g.replayOperations()});return}INSTART.common.fixArgs(arguments)}a.apply(b,arguments)}};INSTART.common.markDontOverride(h.putImageData,a);var q=h.getImageData;h.getImageData=function(){INSTART.console.log("CANVAS: running getImageData");var a=INSTART.common.unwrap(this),b=q.apply(a,arguments);if(!a.canvas.waiting)return INSTART.console.log("CANVAS: not waiting, returning immediate"),b;b.waiting=!0;var g={data:{get:function(){if(b.waiting)throw INSTART.console.log("oh crap, they are gettin our datas"),
"ERROR: imageData.data accessed prior to backfill";return this.__proto__.data},set:function(){}}};INSTART.common.addWrapperProperty(b,g);var e=Object.create(b,g);k(e);var c=a,h=arguments;a.operationQueue.push({method:function(){INSTART.console.log("CANVAS: backfilling the getImageData response");var a=q.apply(c,h);a.waiting=!1;e.__proto__=a;e.replayOperations()},args:null,context:null});return e};INSTART.common.markDontOverride(h.getImageData,q);var r=["measureText","isPointInPath"];for(b=0;b<r.length;b++)j=
h[r[b]],h[r[b]]=function(){var a=r[b],d=h[a];return function(){INSTART.console.log("CANVAS: Applying "+a+" to shadow");var b=INSTART.common.unwrap(this);return d.apply(b.shadowContext,arguments)}}(),INSTART.common.markDontOverride(h[r[b]],j);var s=["drawImage","createPattern"];for(b=0;b<s.length;b++)j=h[s[b]],h[s[b]]=function(){var a=h[s[b]];return function(){var b=INSTART.common.unwrap(this),g=arguments[0];if(b.canvas.waiting){INSTART.console.log("CANVAS: canvas is in waiting");if("IMG"==g.nodeName)INSTART.console.log("CANVAS: queuing draw for "+
arguments[0].src),INSTART.common.isWrapper(g)&&INSTART.lazyLoad.getState(INSTART.common.unwrap(g))!=INSTART.lazyLoad.state.image_loading&&g.fixImage(function(){},[]);else if("CANVAS"==g.nodeName)INSTART.console.log("CANVAS: Queuing draw from canvas");else throw"invalid draw argument "+g.nodeName;b.operationQueue.push({method:arguments.callee,args:arguments,context:this})}else if("IMG"==g.nodeName&&(!INSTART.common.isWrapper(g)||INSTART.lazyLoad.getState(INSTART.common.unwrap(g))==INSTART.lazyLoad.state.image_loaded))INSTART.console.log("CANVAS: immediate image apply "+
arguments[0].src),INSTART.common.fixArgs(arguments),a.apply(b,arguments);else if("CANVAS"==g.nodeName&&!INSTART.common.unwrap(g).waiting)INSTART.console.log("CANVAS: immediate canvas apply"),INSTART.common.fixArgs(arguments),a.apply(b,arguments);else{var e=arguments;b.canvas.waiting=!0;"IMG"==g.nodeName?INSTART.console.log("CANVAS: waiting on "+arguments[0].src):INSTART.console.log("CANVAS: waiting on canvas "+arguments[0].id);var c=function(){b.canvas.waiting=!1;b.replayOperations()};b.operationQueue.push({method:arguments.callee,
args:arguments,context:this});"IMG"==g.nodeName?INSTART.lazyLoad.getState(INSTART.common.unwrap(g))==INSTART.lazyLoad.state.image_loading?INSTART.common.unwrap(g).addEventListener("load",c,!1):g.fixImage(c,e):(INSTART.console.log("CANVAS: queueing canvas to canvas draw"),g=arguments[0].getContext("2d"),INSTART.common.unwrap(g).operationQueue.push({method:c,args:null,context:null}))}}}(),INSTART.common.markDontOverride(h[s[b]],j);var u=HTMLCanvasElement.prototype.toDataURL;HTMLCanvasElement.prototype.toDataURL=
function(){var a=INSTART.common.unwrap(this),b=a.getContext("2d"),g=a,e=arguments,c=u.apply(a,arguments);if(b.canvas.waiting){var h=new String(""),p=INSTART.common.getObjectProperties(h),f;p.content={set:function(a){f=a},get:function(){"undefined"==typeof f&&(INSTART.image2.disableOpts(function(){},!1),f=u.apply(this,e));return f}};p.length={set:function(){},get:function(){return f.length}};c=Object.create(h,p);c.waiting=!0;c.waitList=[];c.toString=function(){"undefined"==typeof f&&(INSTART.image2.disableOpts(function(){},
!1),f=u.apply(g,e));return f};c.valueOf=function(){return this.toString()};b.operationQueue.push({method:function(){var a=u.apply(g,e);c.content=a;b.canvas.waiting=!1;c.waiting=!1;for(var h=c.waitList.length,f=0;f<h;f++){var p=c.waitList[f];p.method.apply(p.context,[a])}c.waitList=[]},args:[],context:a})}return c};INSTART.common.markDontOverride(HTMLCanvasElement.prototype.toDataURL,u)}})})(window,document);(function(){INSTART.protoOverride={};var j=[];INSTART.protoOverride.register=function(){};var c=[];INSTART.protoOverride.registerCallback=function(j){c.push(j)};INSTART.protoOverride.install=function(){for(var l=0;l<c.length;l++)c[l]();for(l=0;l<j.length;l++);INSTART.console.log("Installing default overrides");INSTART.protoOverride.defaultWrapping()};INSTART.registerInit(function(c){c.wrap&&INSTART.protoOverride.install()})})(window,document);(function(j,c){if("undefined"==typeof INSTART||!INSTART)INSTART={};"undefined"===typeof INSTART.documentInterception&&(INSTART.documentInterception={});var l=function(c){return INSTART.common.wrapObject(c,function(f,b){b.startContainer={get:function(){return INSTART.common.interceptObj(c.startContainer)}};b.endContainer={get:function(){return INSTART.common.interceptObj(c.endContainer)}};b.commonAncestorContainer={get:function(){return INSTART.common.interceptObj(c.commonAncestorContainer)}};return b})},
k=function(c,f){return c.whatToShow===NodeFilter.SHOW_ELEMENT?f instanceof INSTART.common.baseClass&&(!c.filter||c.filter.acceptNode(f)):!0},m=function(c){return INSTART.common.wrapObject(c,function(f,b){b.firstChild={value:function(){for(var b=c.firstChild();b&&INSTART.common.isFakeNode(b)&&k(c,b);)b=c.nextSibling();return INSTART.common.interceptObj(b)}};b.lastChild={value:function(){for(var b=c.lastChild();b&&INSTART.common.isFakeNode(b)&&k(c,b);)b=c.previousSibling();return INSTART.common.interceptObj(b)}};
b.nextSibling={value:function(){for(var b=c.nextSibling();b&&INSTART.common.isFakeNode(b)&&k(c,b);)b=c.nextSibling();return INSTART.common.interceptObj(b)}};b.previousSibling={value:function(){for(var b=c.previousSibling();b&&INSTART.common.isFakeNode(b)&&k(c,b);)b=c.previousSibling();return INSTART.common.interceptObj(b)}};b.parentNode={value:function(){return INSTART.common.interceptObj(c.parentNode())}};b.nextNode={value:function(){for(var b=c.nextNode();b&&INSTART.common.isFakeNode(b)&&k(c,b);)b=
INSTART.common.isFakeNode(b)?c.nextSibling():c.nextNode();return INSTART.common.interceptObj(b)}};b.previousNode={value:function(){for(var b=c.previousNode();b&&INSTART.common.isFakeNode(b)&&k(c,b);)INSTART.common.isFakeNode(b)?(b=c.previousSibling())||(b=c.parentNode()):b=c.previousNode();return INSTART.common.interceptObj(b)}};return b})};INSTART.documentInterception.treeWalkerInterceptor=m;var f=function(){INSTART.console.log("Installing document overrides");var f=[];j.HTMLDocument&&j.HTMLDocument.prototype&&
f.push(j.HTMLDocument.prototype);j.Document&&j.Document.prototype&&f.push(j.Document.prototype);0==f.length&&f.push(c);INSTART.console.log(f);for(var k=[["adoptNode",INSTART.common.interceptObj],["addBinding"],["appendChild"],["captureEvents"],["caretRangeFromPoint"],["clear"],["cloneNode",INSTART.common.interceptObj],["close"],["compareDocumentPosition"],["contains"],["createAttribute",INSTART.common.wrapAttrNode],["createAttributeNS",INSTART.common.interceptObj],["createCDATASection",INSTART.common.interceptObj],
["createComment",INSTART.common.interceptObj],["createDocumentFragment",INSTART.DocumentFragment.wrap],["createElement",INSTART.common.interceptObj],["createElementNS",INSTART.common.interceptObj],["createEntityReference"],["createEvent"],["createExpression"],["createNodeIterator",INSTART.common.interceptObj],["createNSResolver"],["createProcessingInstruction"],["createRange",l],["createTextNode",INSTART.common.interceptObj],["createTreeWalker",m],["elementFromPoint",INSTART.common.interceptObj],
["evaluate"],["execCommand"],["getCSSCanvasContext",INSTART.common.interceptObj],["getElementById",INSTART.common.interceptObj],["getElementsByClassName",INSTART.common.wrapList],["getElementsByName",INSTART.common.wrapList],["getElementsByTagName",INSTART.common.wrapList],["getElementsByTagNameNS",INSTART.common.wrapList],["getElementById",INSTART.common.interceptObj],["getElementsByClassName",INSTART.common.wrapList],["getElementsByName",INSTART.common.wrapList],["getElementsByTagName",INSTART.common.wrapList],
["getElementsByTagNameNS",INSTART.common.wrapList],["getOverrideStyle"],["getSelection"],["hasFocus"],["importNode",INSTART.common.interceptObj],["open"],["querySelectorAll",INSTART.common.wrapList],["querySelector",INSTART.common.interceptObj],["releaseEvents"],["write"],["writeln"],["queryCommandEnabled"],["queryCommandIndeterm"],["queryCommandState"],["queryCommandSupported"],["queryCommandText"],["queryCommandValue"],["webkitCancelFullScreen"],["webkitExitFullscreen"],["webkitExitPointerLock"],
["webkitGetNamedFlows"]],b=0;b<f.length;b++){for(var e=f[b],a=0;a<k.length;a++){var q=k[a];INSTART.common.wrapProto(e,q[0],q[1],q[2])}INSTART.common.overrideEventsOnPrototype(e)}INSTART.common.overrideEventsOnPrototype(j);INSTART.common.overrideEventsOnPrototype(HTMLBodyElement.prototype);INSTART.common.overrideEventsOnPrototype(HTMLHeadElement.prototype);INSTART.common.overrideEventsOnPrototype(HTMLHtmlElement.prototype)};INSTART.protoOverride.registerCallback(f);INSTART.documentInterception.installDocumentInterceptions=
f})(window,document);(function(j){INSTART.windowInterception={};INSTART.protoOverride.registerCallback(function(){INSTART.console.log("Installing window overrides");for(var c=j.Window.prototype,l=[["dispatchEvent"],["getDefaultComputedStyle"],["getComputedStyle"],["getMatchedCSSRules"],["getSelection",INSTART.common.interceptObj],["webkitConvertPointFromNodeToPage"],["webkitConvertPointFromPageToNode"]],k=0;k<l.length;k++){var m=l[k];INSTART.common.wrapProto(c,m[0],m[1],m[2])}INSTART.common.overrideEventsOnPrototype(c)})})(window,
document);(function(j,c){if("undefined"==typeof INSTART||!INSTART)INSTART={};"undefined"===typeof INSTART.image2&&(INSTART.image2={});var l=0,k=function(a){return"img uid("+a.__img_uid+")"};INSTART.image2.getuid=k;var m=function(a,b){INSTART.console.log("TRACE: "+k(a)+' src: "'+a._getVirtualSrcInternal()+'" '+b)},f=!0===INSTART.nologging?function(){}:function(a){a=INSTART.common.unwrap(a)._src_attr_node;if("undefined"!=typeof a&&("undefined"===typeof a._vmode||!1===a._vmode)){INSTART.common.backtrace("attr node needs vmode");
debugger}};INSTART.lazyLoad={};INSTART.lazyLoad.state={start:"start",dummy_loading:"dummy_loading",dummy_loaded:"dummy_loaded",image_loading:"image_loading",image_loaded:"image_loaded"};INSTART.lazyLoad.getState=function(a){return a._state};INSTART.lazyLoad.setState=function(a,b){a._state=b};INSTART.image2.useImageApi=!1;INSTART.image2.enableImageVirtualization=!1;INSTART.image2.virtualizeDomains=[/.*/];INSTART.image2.overlayImageTimeOutSeconds=3;var h=function(a,b){var c=INSTART.common.unwrap(a);
if(INSTART.image2.useImageApi){m(c,"loadImageOnObject -> fetchImage start");var e=INSTART.imageApi.fetchImage(b,function(a){delete c._fetchHandle;m(c,"loadImageOnObject -> fetchImage cb, invokes assignDataUri");INSTART.common.assignDataUri(c,a)});c._fetchHandle=e}else c.isVirtualLoadHanlderEnabled=!0,c.src=b,INSTART.staticImg.partialImagesEnabled&&(m(c,"checking for backpatch"),INSTART.staticImg.backPatchImage(a))},n=function(a,b,c){if(!INSTART.common.isWrapper(this))throw"TRACE: fixImage called on non-wrapped image";
var e=this,f=INSTART.common.unwrap(e);m(f,"fixImage called");if(INSTART.lazyLoad.getState(f)==INSTART.lazyLoad.state.image_loaded)INSTART.console.log("TRACE: image already fixed, returning");else if(INSTART.lazyLoad.getState(f)==INSTART.lazyLoad.state.image_loading)INSTART.console.log("TRACE: image already loading fixes, returning");else{INSTART.lazyLoad.getState(f)==INSTART.lazyLoad.state.dummy_loading&&(f.src="");INSTART.lazyLoad.setState(f,INSTART.lazyLoad.state.image_loading);var k=function(){"undefined"!=
typeof a&&a.call(e,!1);f.removeEventListener("load",k)};f.addEventListener("load",k,!1);b=this.src;f.src!=b?h(this,b,c):"undefined"!=typeof a&&a.call(e,!1)}};INSTART.protoOverride.defaultWrapping=function(){var a=INSTART.common.htmlElements,b=function(a,b){return!a||!a.prototype[b]||INSTART.common.dontOverride(a.prototype[b])?!1:a.prototype[b]!==Object.getPrototypeOf(a.prototype)[b]?!0:!1},c=function(a){return function(b){b=b[a];INSTART.common.isWrapper(b)&&("IMG"==b.nodeName&&""!=b.src)&&b.fixImage(function(){},
[])}};INSTART.image2.fixImgArg=c;for(var c=[["appendChild",INSTART.common.interceptObj,c(0)],["blur"],["click"],["cloneNode",INSTART.common.interceptObj],["compareDocumentPosition"],["contains"],["dispatchEvent"],["focus"],["getAttribute"],["getAttributeNS"],["getAttributeNode",INSTART.common.interceptObj],["getAttributeNodeNS",INSTART.common.interceptObj],["getBoundingClientRect"],["getClientRects"],["getElementsByTagNameNS",INSTART.common.wrapList],["getElementsByTagName",INSTART.common.wrapList],
["getElementsByClassName",INSTART.common.wrapList],["getUserData"],["hasAttribute"],["hasAttributeNS"],["hasAttributes"],["hasChildNodes"],["insertAdjacentElement",INSTART.common.wrapList],["insertAdjacentHTML"],["insertAdjacentText"],["insertBefore",INSTART.common.interceptObj,c(0)],["isDefaultNamespace"],["isEqualNode"],["isSameNode"],["isSupported"],["lookupNamespaceURI"],["lookupPrefix"],["normalize"],["querySelectorAll",INSTART.common.wrapList],["querySelector",INSTART.common.interceptObj],["releaseCapture"],
["remove"],["removeAttribute"],["removeAttributeNS"],["removeAttributeNode",INSTART.common.interceptObj],["removeAttributeNodeNS",INSTART.common.interceptObj],["removeChild",INSTART.common.interceptObj],["replaceChild",INSTART.common.interceptObj,c(0)],["scrollByLines"],["scrollByPages"],["scrollIntoView"],["scrollIntoViewIfNeeded"],["setAttribute"],["setAttributeNS"],["setAttributeNode",INSTART.common.interceptObj],["setAttributeNodeNS",INSTART.common.interceptObj],["setCapture"],["setUserData"],
["toString"],["webkitCreateShadowRoot"],["webkitGetRegionFlowRanges"],["webkitRequestFullscreen"]],e=[["matchesSelector"],["requestFullScreen"],["requestPointerLock"]],f=["moz","webkit","ms"],h=0;h<a.length;h++){for(var d=a[h],g=0;g<c.length;g++){var k=c[g],j=d,m=k[0],p=k[1],k=k[2];b(j,m)&&INSTART.common.wrapProto(j.prototype,m,p,k)}for(g=0;g<e.length;g++){var k=e[g],j=k[0],m=d,p=k[0],l=k[1],n=k[2];b(m,p)&&INSTART.common.wrapProto(m.prototype,p,l,n);for(m=0;m<f.length;m++){var l=f[m]+j.charAt(0).toUpperCase()+
j.substring(1),p=d,n=k[1],B=k[2];b(p,l)&&INSTART.common.wrapProto(p.prototype,l,n,B)}}}};var b=function(){INSTART.console.log("Installing image overrides");var a=function(a){if(INSTART.common.isWrapper(a))return a;var b;a.__img_uid=a.__img_uid||l++;var d;d=/^data:/.test(a.src)?"data":a.src;INSTART.console.log("intercepting image "+k(a)+'  src="'+d+'"');INSTART.common.initEvents(a);b=INSTART.common.wrapDOMElement(a,!1);d=INSTART.common.getOldFcn(a.getAttributeNode).call(a,"src");if(null==d||"undefined"===
typeof d)d=INSTART.common.getOldFcn(c.createAttribute).call(c,"src"),INSTART.common.getOldFcn(a.setAttributeNode).call(a,d);INSTART.common.wrapAttrNode(d);d._enable_virt();a._src_attr_node=d;""!=a.src?INSTART.lazyLoad.setState(a,INSTART.lazyLoad.state.image_loaded):INSTART.lazyLoad.setState(a,INSTART.lazyLoad.state.start);INSTART.console.log("TRACE: intercepted image with state "+INSTART.lazyLoad.getState(a));a.addEventListener("load",function(){var d=INSTART.lazyLoad.getState(a);if(INSTART.lazyLoad.getState(a)==
INSTART.lazyLoad.state.dummy_loading)INSTART.lazyLoad.setState(a,INSTART.lazyLoad.state.dummy_loaded);else if(INSTART.lazyLoad.getState(a)==INSTART.lazyLoad.state.image_loading)INSTART.lazyLoad.setState(a,INSTART.lazyLoad.state.image_loaded);else if(INSTART.lazyLoad.getState(a)!=INSTART.lazyLoad.state.image_loaded)throw"Image load callback called for "+k(this)+"  while image in state "+INSTART.lazyLoad.getState(a);INSTART.console.log("TRACE: img load event for "+k(this)+" "+b.src+" transition from "+
d+" to "+INSTART.lazyLoad.getState(a))},!1);b.fixImage=n;f(b);return b};INSTART.common.addNodeInterceptor("IMG",a);var b=HTMLImageElement.prototype.getAttribute,e=HTMLImageElement.prototype.setAttribute,j=HTMLImageElement.prototype.getAttributeNode,m=HTMLImageElement.prototype.setAttributeNode;INSTART.HTMLImageElement={};INSTART.HTMLImageElement.getAttribute=function(a){return"SRC"==a.toUpperCase()?INSTART.common.unwrap(this)._getVirtualSrcInternal():b.call(INSTART.common.unwrap(this),a)};INSTART.HTMLImageElement.setAttribute=
function(a,b){return"SRC"==a.toUpperCase()?INSTART.common.unwrap(this)._setVirtualSrcInternal(b):e.call(INSTART.common.unwrap(this),a,b)};INSTART.HTMLImageElement.getAttributeNode=function(a){return INSTART.common.interceptObj(j.call(INSTART.common.unwrap(this),a))};INSTART.HTMLImageElement.setAttributeNode=function(a){if("SRC"==a.name.toUpperCase()){var b=a.value;a.value="";a=INSTART.common.unwrap(a);var d=INSTART.common.interceptObj(m.call(INSTART.common.unwrap(this),a));a._enable_virt();this._setVirtualSrcInternal(b);
INSTART.common.unwrap(this)._src_attr_node=a;return d}return INSTART.common.interceptObj(m.call(INSTART.common.unwrap(this),INSTART.common.unwrap(a)))};for(var t=["setAttribute","getAttribute","setAttributeNode","getAttributeNode"],d=0;d<t.length;d++){var g=t[d],y=HTMLImageElement.prototype[g];HTMLImageElement.prototype[g]=INSTART.HTMLImageElement[g];INSTART.common.markDontOverride(HTMLImageElement.prototype[g],y)}var v=Image;Image=function(b,d){INSTART.console.log("TRACE: creating wrapped image");
var c;c=d?new v(b,d):b?new v(b):new v;return a(c)};var t=function(a){f(this);INSTART.console.log("TRACE: "+k(this)+" wrapped img.src.set("+a+') prev "'+this._getVirtualSrcInternal()+'"');var b=this._src_attr_node;b||(this._src_attr_node=b=INSTART.common.getOldFcn(c.createAttribute).call(c,"src"),INSTART.common.wrapAttrNode(b),b._enable_virt(),INSTART.common.getOldFcn(this.setAttributeNode).call(this,b));b._setVirtValue(a);this._setAcutalSrcInternal(a);INSTART.console.log("TRACE: this.isVirtualLoadHanlderEnabled: "+
this.isVirtualLoadHanlderEnabled);return a},d=function(){f(this);var a=this._src_attr_node;return!a?"":a._getVirtValue()},z={set:function(a){return INSTART.common.unwrap(this)._setVirtualSrcInternal(a)},get:function(){var a=INSTART.common.unwrap(this)._getVirtualSrcInternal();return a?INSTART.common.absPath(a):a}},g=function(a){var b=this._fetchHandle;b&&(b.cancel(),delete this._fetchHandle);var d=INSTART.common.unwrap(this);d.isVirtualLoadHanlderEnabled=!1;/^data/.test(a)&&a.substring(0,a.indexOf(";"));
if(null==a||""==a)INSTART.lazyLoad.setState(d,INSTART.lazyLoad.state.start),d.src!==a&&(d.src=a);else if(/^data:/.test(a))INSTART.lazyLoad.setState(d,INSTART.lazyLoad.state.image_loading),d.removeAttribute("crossOrigin"),d.isVirtualLoadHanlderEnabled=!0,d.src=a;else{for(var c=INSTART.common.getDomain(a),b=!1,g=0;g<INSTART.image2.virtualizeDomains.length;g++)if(INSTART.image2.virtualizeDomains[g].test(c)){b=!0;break}a.waitList&&a.waiting&&a.waitList.push({method:function(a){d.src=a},context:this});
c=INSTART.image2.reqCache.get(a);"tag"==c&&(b=!1,INSTART.console.log('TRACE: has tag for "'+a+'"'));b?INSTART.lazyLoad.notToBeLazyLoaded(a)||!INSTART.image2.enableImageVirtualization?(INSTART.lazyLoad.setState(d,INSTART.lazyLoad.state.image_loading),h(this,a,INSTART.image2.isJpegStream())):d.parentNode?(INSTART.console.log('TRACE: image "'+a+'" has parent, performing fetch immediate'),INSTART.lazyLoad.setState(d,INSTART.lazyLoad.state.image_loading),"dummy"==c?(INSTART.console.log('TRACE: priming "'+
a+'" with dummy'),d.isVirtualLoadHanlderEnabled=!0,d.src=INSTART.image2.getDummyImgUrl(a)):INSTART.console.log("TRACE: not cached I think "+a),h(this,a,INSTART.image2.isJpegStream())):(INSTART.console.log("TRACE: fetching dummy for "+this._getVirtualSrcInternal()),INSTART.image2.reqCache.set(a),INSTART.lazyLoad.setState(d,INSTART.lazyLoad.state.dummy_loading),d.isVirtualLoadHanlderEnabled=!0,d.src=INSTART.image2.getDummyImgUrl(a)):(INSTART.console.log('Not virtualizing image "'+a+'"'),INSTART.lazyLoad.setState(d,
INSTART.lazyLoad.state.image_loading),d.isVirtualLoadHanlderEnabled=!0,d.src=a,d.addEventListener("load",function(){INSTART.staticImg.backPatchImage(this);this.removeEventListener("load",arguments.callee)}))}};HTMLImageElement.prototype._setAcutalSrcInternal=g;INSTART.common.markDontOverride(g,null);HTMLImageElement.prototype._setVirtualSrcInternal=t;INSTART.common.markDontOverride(t,null);HTMLImageElement.prototype._getVirtualSrcInternal=d;INSTART.common.markDontOverride(d,null);t=function(){return this._src_attr_node.value};
HTMLImageElement.prototype._getActualSrc=t;INSTART.common.markDontOverride(t,null);t=INSTART.common.getOldFcn(c.createElement).call(c,"IMG");d=INSTART.common.defaultProtoWrapper(t,function(a,b){INSTART.common.defaultStyleOverride(a,b);INSTART.common.interceptInnerHTMLAttribute(a,b);INSTART.common.addDom0EventHandlers(a,b);INSTART.common.defaultFamilyOverride(a,b);INSTART.common.protoEventSystem(a,b);b.src=z;b.crossOrigin={set:function(a){return INSTART.common.unwrap(this)._crossOrigin=a},get:function(){return"undefined"!==
typeof INSTART.common.unwrap(this)._crossOrigin?INSTART.common.unwrap(this)._crossOrigin:INSTART.common.unwrap(this).crossOrigin}};b.attributes={get:function(){return INSTART.NamedNodeMap.wrapImageAttributes(INSTART.common.unwrap(this).attributes,INSTART.common.unwrap(this))}};var d=INSTART.common.protoFcnWrapper("dispatchEvent");b.dispatchEvent={value:function(a){INSTART.console.log("Disptaching event : "+a+" to image "+this);"LOAD"===a.type.toUpperCase()&&(INSTART.common.unwrap(this).isVirtualLoadHanlderEnabled=
!0);d.value.apply(this,arguments)}}});INSTART.common.setElementProto(t.tagName,d);INSTART.common.registerEventSystem("IMG",{load:function(){if(this.isVirtualLoadHanlderEnabled)return INSTART.console.log("firing virtual load handlers for "+k(this)+" "+this._getVirtualSrcInternal()),this.isVirtualLoadHanlderEnabled=!1,INSTART.common.default_EventHandler.apply(this,arguments),!0}})};INSTART.protoOverride.registerCallback(b);INSTART.image2.installWrapping=b;INSTART.image2.isImageVirtualized=function(a){a=
INSTART.common.getDomain(a);for(var b=!1,c=0;c<INSTART.image2.virtualizeDomains.length;c++)if(INSTART.image2.virtualizeDomains[c].test(a)){b=!0;break}return b};if("undefined"==typeof INSTART||!INSTART)INSTART={};if("undefined"==typeof INSTART.lazyLoad||!INSTART.lazyLoad)INSTART.lazyLoad={};var e=[];INSTART.lazyLoad.setNoLazyLoading=function(a){e[a]=1};INSTART.lazyLoad.unsetNoLazyLoading=function(a){e[a]=0};INSTART.lazyLoad.notToBeLazyLoaded=function(a){return 1==e[a]};if("undefined"==typeof INSTART.image2||
!INSTART.image2)INSTART.image2={};INSTART.image2.RealImage=Image;INSTART.registerInit(function(a){"dynamicInterception"in a&&!1==a.dynamicInterception&&(Image=INSTART.image2.RealImage);try{INSTART.common.getConfigRegexList(a,"virtualizeDomains",INSTART.image2.virtualizeDomains)}catch(b){INSTART.console.log("virtualizeDomains config error: "+b)}"useImageApi"in a&&"boolean"==typeof a.useImageApi&&(INSTART.image2.useImageApi=a.useImageApi);"enableImageVirtualization"in a&&"boolean"==typeof a.enableImageVirtualization&&
(INSTART.image2.enableImageVirtualization=a.enableImageVirtualization)})})(window,document);(function(j,c){if("undefined"==typeof INSTART||!INSTART)INSTART={};if("undefined"==typeof INSTART.staticImg||!INSTART.staticImg)INSTART.staticImg={};INSTART.staticImg.partialDomainPatterns=[/.*/];INSTART.staticImg.partialImagesEnabled=!0;var l=!1,k={},m=function(a,b,d){var c;!INSTART.staticImg.partialImagesEnabled||"undefined"==typeof a||/^data:/.test(a)?(INSTART.console.log("what"),c=!1):(c=INSTART.common.getDomain(a),c=INSTART.staticImg.isDomainIntercepted(c));if(c){INSTART.console.log("backpatch called for "+
a);var e=null;if(a in k){if(e=k[a],e.notPartial){INSTART.console.log("not a partial image");return}}else e={callbacks:[],notPartial:!1,state:"idle"},k[a]=e;e.callbacks.push(d);"idle"==e.state&&(INSTART.console.log('Checking "'+a+'" for backpatch'),e.state="checking",b&&INSTART.common.registerImgStatsUrl(a),INSTART.loader.fetchImageData(a,function(d,c,f){if(0==f||!d)INSTART.console.log("Error: error in fetching image "+a);else{var h=new Uint8Array(d,0);INSTART.console.log("TRACE: static image: "+a+
", "+c+", "+!INSTART.image2.isCompleteJpeg(h));!INSTART.image2.isCompleteJpeg(h)&&INSTART.image2.isJpeg(h)?(INSTART.console.log("Fetching partial for "+a),INSTART.image2.fetchPartialFragment(a,h.length,function(d){INSTART.image2.handlePartialFragment(d,h,function(d,c){for(var f=0;f<e.callbacks.length;f++)e.callbacks[f](d);e.callbacks=[];e.state="idle";b&&INSTART.common.imgStats(a,h.length,c.length-h.length)})})):(e.callbacks=[],e.state="idle",e.notPartial=!0,b&&INSTART.common.imgStats(a,h.length,
0))}}))}};INSTART.staticImg.backPatchUrl=m;var f=RegExp(/^data:/),h=[],n=function(a,b){a=INSTART.common.unwrap(a);if(INSTART.staticImg.partialImagesEnabled&&!(""==a.src||f.test(a.src)))if(l){var d=a.src;m(d,b,function(b){a.src==d&&(INSTART.console.log("backpatching for "+d),INSTART.common.assignDataUri(a,b))})}else h.push(a)};INSTART.staticImg.backPatchImage=function(a){n(a,!1)};INSTART.staticImg.isDomainIntercepted=function(a){for(var b=0;b<INSTART.staticImg.partialDomainPatterns.length;b++)if(INSTART.staticImg.partialDomainPatterns[b].test(a))return!0;
return!1};var b=function(d){for(var c=0;50>c;c++){var e=d.nextNode();if(null==e)return;a(e)}setTimeout(function(){b(d)},1)},e=function(){INSTART.console.log("load event -> backpatch");var d=INSTART.common.getOldFcn(c.getElementsByTagName).call(c,"img");l=!0;for(var e=0;e<d.length;e++)n(d[e],!0);for(e=0;e<h.length;e++)n(h[e],!0);d=INSTART.common.getOldFcn(c.createNodeIterator).call(c,c.body,NodeFilter.SHOW_ELEMENT,null,!1);b(d);null===INSTART.common.MutationObserver&&INSTART.common.getOldFcn(c.addEventListener).call(c,
"DOMAttrModified",function(b){b.attrChange===MutationEvent.MODIFICATION&&("style"===b.attrName&&"#text"!=b.target.nodeName&&"#comment"!=b.target.nodeName)&&a(b.target)},!0);INSTART.common.getOldFcn(c.addEventListener).call(c,"DOMSubtreeModified",function(a){"undefined"!==typeof a.target&&("undefined"!==typeof a.target.getElementsByTagName&&"#text"!=a.target.nodeName&&"#comment"!=a.target.nodeName)&&a.target.hasChildNodes()&&u(a.target)},!0)},a=function(a){if("DIV"==a.nodeName&&!/^url\("data:/.test(a.style.backgroundImage)&&
""!=a.style.backgroundImage){INSTART.console.log("attr modified -> TODO check for style :  : "+a.style.backgroundImage);var b=a.style.backgroundImage;if(/^url\(/.test(b))if(/^url\(.?data:/.test(b))INSTART.console.log("bailing on data uri");else{var d;d='"'==b[4]||"'"==b[4]?b.substring(5,b.length-2):b.substring(4,b.length-1);INSTART.console.log("url from style: "+d);m(d,!1,function(d){INSTART.console.log("backpatch fetched data uri");a.style.backgroundImage==b&&(a.style.backgroundImage=['url("',d,
'")'].join(""))})}else INSTART.console.log("bailing on non-url")}},q=0,r={},s=!1,u=function(a){"undefined"===typeof a.__uid&&(a.__uid=q,q++);r[a.__uid]=a;s||(s=!0,setTimeout(t,50))};INSTART.staticImg.subtreeModAddNode=u;var t=function(){for(var a in r){var b=r[a];setTimeout(function(){var e=b,f=a;return function(){for(var a=e.getElementsByTagName("img"),b=0;b<a.length;b++)INSTART.common.isFakeNode(a[b])||n(a[b],!1);a=INSTART.common.getOldFcn(c.createNodeIterator).call(c,INSTART.common.unwrap(e),NodeFilter.SHOW_ELEMENT,
null,!1);d(a,f)}}(),1);break}"undefined"===typeof a&&(s=!1)},d=function(b,c){for(var e=null,f=0;50>f;f++){e=b.nextNode();if(null===e)break;"undefined"!==typeof e.__uid&&delete r[e.__uid];a(e)}null===e?(delete r[c],t()):setTimeout(function(){d(b,c)},1)};INSTART.registerInit(function(a){"boolean"===typeof a.partialImage&&(INSTART.staticImg.partialImagesEnabled=a.partialImage);try{INSTART.common.getConfigRegexList(a,"virtualizeDomains",INSTART.staticImg.partialDomainPatterns)}catch(b){console.error("virtualizeDomains config error: "+
b)}a.partialImage&&INSTART.common.getOldFcn(j.addEventListener).call(j,"load",function(){setTimeout(e,1)},!1)})})(window,document);(function(j,c){if("undefined"==typeof INSTART||!INSTART)INSTART={};if("undefined"==typeof INSTART.events||!INSTART.events)INSTART.events={};INSTART.events.subtreeChange="subtreeChange";INSTART.events.changeType="changeType";INSTART.events.changeTypeCss="css";INSTART.events.changeTypeHtmlObjectProperty="htmlObjectProperty";INSTART.events.changedProperty="changedProperty";INSTART.events.imgSrc="imgSrc";INSTART.events.innerHTML="innerHTML";INSTART.events.getCustomEvent=function(j,k){var m=c.createEvent("CustomEvent");
m.initCustomEvent(j,!0,!0,k);return m}})(window,document);(function(j){if("undefined"==typeof INSTART||!INSTART)INSTART={};if("undefined"==typeof INSTART.styleImages||!INSTART.styleImages)INSTART.styleImages={};var c=/.*?url\((\'|\")?(.*?)(\'|\")?\).*/,l=function(k,m){var f=j.getComputedStyle(k,null);(f=c.exec(f[m]))&&!/^data:/.test(f[2])&&INSTART.staticImg.backPatchUrl(f[2],!0,function(c){k.style[m]="url("+c+")"})};INSTART.styleImages.fixImages=function(c,j){for(var f=0;f<j.length;f++)l(c,j[f])};j.addEventListener(INSTART.events.subtreeChange,function(c){INSTART.console.log("Custom Event: "+
c.detail[INSTART.events.changeType]+"  "+c.detail[INSTART.events.changedProperty]);c.detail[INSTART.events.changeType]===INSTART.events.changeTypeHtmlObjectProperty&&c.detail[INSTART.events.changedProperty]===INSTART.events.innerHTML&&INSTART.staticImg.subtreeModAddNode(c.target)},!1);INSTART.common.addStyleHook(function(c,j,f,h){if("backgroundImage"==f&&INSTART.image2.useImageApi&&"url(data:"!=h.substring(0,9)){for(var l=0;l<h.length&&" "==h[l];l++);for(var b=h.length-1;0<=b&&" "==h[b];b--);if("url("==
h.substr(l,4)&&")"==h[b]){l+=4;if("'"==h[l]||'"'==h[l])l+=1,b-=1;h=h.substring(l,b)}else h=null;if(null!=h){for(var l=INSTART.common.getDomain(h),b=!1,e=INSTART.image2.virtualizeDomains.length,a=e.length,q=0;q<a;q++)if(e[q].test(l)){b=!0;break}b?(INSTART.imageApi.fetchImage(h,function(a){j[f]="url("+a+")"}),h=!1):h=!0}else h=!0;return h}setTimeout(function(){INSTART.styleImages.fixImages(c,INSTART.common.styleImageChangerMap[f])},1);return!0})})(window,document);(function(j){INSTART.dom0={};INSTART.dom0.handleAttributeEvents=function(c){0<INSTART.common.getRegisteredDom0Events(c).length&&INSTART.common.interceptObj(c,!0)};INSTART.prof.dom0ms=0;INSTART.registerInit(function(c){c.wrap&&INSTART.common.getOldFcn(j.addEventListener).call(j,"DOMContentLoaded",function(){setTimeout(function(){var c=(new Date).valueOf();INSTART.common.TreeWalker(document.body,function(){INSTART.dom0.handleAttributeEvents(this)});INSTART.prof.dom0ms=(new Date).valueOf()-c},1)},!1)})})(window,
document);(function(j,c){INSTART.iframerpc={};var l={},k={},m=function(b,c,a,f){var h=k[b];delete k[b];h?INSTART.console.log("No callbacks registered for url : "+b):INSTART.console.log(h.length+" callbacks registered for url : "+b);for(b=0;b<h.length;b++)h[b].call(this,c,a,f)};INSTART.iframerpc.getImageData=function(b,e){var a=INSTART.common.getProtocolAndHost(b),f=function(c){INSTART.console.log("Frame is ready for url "+b);c.contentWindow.postMessage({url:b,operation:"GET"},a)};INSTART.console.log("preparing frame for : "+
a);var h=l[a];h?f(h):(h=INSTART.common.unwrap(c.createElement("iframe")),INSTART.common.markFake(h),h.setAttribute("height",0),h.setAttribute("width",0),h.setAttribute("border",0),h.setAttribute("style","width: 0; height: 0; border: none;"),h.addEventListener("load",function(a){f(this);this.removeEventListener("load",arguments.callee)}),h.setAttribute("src",a+"/instart/rpc.html"),INSTART.console.log("frame ready : "+h),c.body.appendChild(h),l[a]=h);(h=k[b])||(k[b]=h=[]);h.push(e)};var f=[],h=j.addEventListener;
j.addEventListener=function(b,c,a){"message"===b?-1===f.indexOf(c)?f.push(c):INSTART.console.log('Event handler for "message" : '+c+" is already added "):h.apply(j,arguments)};var n=j.removeEventListener;j.removeEventListener=function(b,c,a){if("message"===b){for(var h=[],k=0;k<f.length;k++)f[k]!=c&&h.push(f[k]);f=h}else n.apply(j,arguments)};h.call(j,"message",function(b){var c=b.data;if("undefined"!=typeof c.____INSTART_MESSAGE____)c=c.____INSTART_MESSAGE____,INSTART.console.log("Received data from iframe "+
c.url),m(c.url,c.response,c.mimeType,c.status);else for(c=0;c<f.length;c++)f[c].apply(j,arguments)},!1)})(window,document);(function(j,c){var l=INSTART.common.getOldFcn(c.createElement).call(c,"FORM"),k=INSTART.common.defaultProtoWrapper(l,function(c,f){INSTART.common.defaultCustomProps(c,f);f.elements={get:function(){return INSTART.HtmlCollection.wrap(INSTART.common.unwrap(this).elements)},set:function(){}}});INSTART.common.setElementProto(l.tagName,k)})(window,document);
(function(j,c){var l=INSTART.common.getOldFcn(c.createElement).call(c,"INPUT"),k=INSTART.common.defaultProtoWrapper(l,function(c,f){INSTART.common.defaultCustomProps(c,f);f.form={get:function(){return INSTART.common.interceptObj(INSTART.common.unwrap(this).form)},set:function(){}}});INSTART.common.setElementProto(l.tagName,k)})(window,document);(function(j,c){var l=INSTART.common.getOldFcn(c.createElement).call(c,"TEXTAREA"),k=INSTART.common.defaultProtoWrapper(l,function(c,f){INSTART.common.defaultCustomProps(c,f);f.form={get:function(){return INSTART.common.interceptObj(INSTART.common.unwrap(this).form)},set:function(){}}});INSTART.common.setElementProto(l.tagName,k)})(window,document);(function(j,c){INSTART.HtmlCollection={};var l=-1,k=INSTART.common.getOldFcn(c.createElement).call(c,"form").elements,m,f=INSTART.common.protoProperties();f.length={get:function(){var a=INSTART.common.unwrap(this);a.length!=a.__plength&&e(this);return a.__vlength}};f.item={value:function(a){return this[a]}};f.namedItem={value:function(a){return this[a]}};m=Object.create(k,f);var h=function(a){for(var b=0;b<a.length;b++)if(!INSTART.common.isFakeNode(a[b]))return!1;return!0},n=function(a){a in m||Object.defineProperty(m,
a,{get:function(){var b=INSTART.common.unwrap(this)[a];return b instanceof HTMLCollection?h(b)?k[a]:INSTART.HtmlCollection.wrap(b):b instanceof NodeList?h(b)?k[a]:INSTART.NodeList.wrap(b):INSTART.common.isFakeNode(b)?k[a]:INSTART.common.interceptObj(b)},set:function(a){return a}})},b=function(a){l=a;Object.defineProperty(m,a.toString(),{get:function(){var b=INSTART.common.unwrap(this);return INSTART.common.interceptObj(b[b.__vidx[a]])},set:function(a){return a}})},e=function(a){a=INSTART.common.unwrap(a);
a.__plength=a.length;for(var c=0,e=a.__vidx,f=0;f<a.length;f++){var h=a[f];INSTART.common.isFakeNode(h)?c++:("undefined"!==typeof h.name&&n(h.name),h=f-c,l<h&&b(h),e.length<=h?e.push(f):e[h]=f)}a.__vlength=a.length-c};INSTART.HtmlCollection.wrap=function(a){if(INSTART.common.hasWrapper(a))return INSTART.common.getWrapper(a);var b=INSTART.common.protoWrapperProperties(a),b=Object.create(m,b);INSTART.common.setWrapper(a,b);a.__vidx=[];e(b);return b}})(window,document);(function(j,c){INSTART.NodeList={};var l=-1,k;k=INSTART.common.getOldFcn(c.createElement).call(c,"div");k=INSTART.common.getOldFcn(k.getElementsByTagName).call(k,"div");var m,f=INSTART.common.protoProperties();f.length={get:function(){var b=INSTART.common.unwrap(this);b.length!=b.__plength&&n(this);return b.__vlength}};f.item={value:function(b){return this[b]}};m=Object.create(k,f);var h=function(b){l=b;Object.defineProperty(m,b.toString(),{get:function(){var c=INSTART.common.unwrap(this);return INSTART.common.interceptObj(c[c.__vidx[b]])},
set:function(b){return b}})},n=function(b){b=INSTART.common.unwrap(b);b.__plength=b.length;for(var c=0,a=b.__vidx,f=0;f<b.length;f++)if(INSTART.common.isFakeNode(b[f]))c++;else{var j=f-c;l<j&&h(j);a.length<=j?a.push(f):a[j]=f}b.__vlength=b.length-c};INSTART.NodeList.wrap=function(b){if(INSTART.common.hasWrapper(b))return INSTART.common.getWrapper(b);var c=INSTART.common.protoWrapperProperties(b),c=Object.create(m,c);INSTART.common.setWrapper(b,c);b.__vidx=[];n(c);return c}})(window,document);(function(j,c){INSTART.NamedNodeMap={};var l=0,k=INSTART.common.getOldFcn(c.createElement).call(c,"div").attributes,m,f=INSTART.common.protoProperties();f.length={get:function(){var a=INSTART.common.unwrap(this);a.length!=a.__plength&&b(this);return a.length}};for(var h in k)"function"===typeof k[h]&&!(h in f)&&(f[h]=function(){var a=h;return{value:function(){INSTART.common.fixArgs(arguments);var b=INSTART.common.unwrap(this);return INSTART.common.interceptObj(b[a].apply(INSTART.common.unwrap(this),
arguments))}}}());m=Object.create(k,f);var n=function(a){l=a+1;Object.defineProperty(m,a.toString(),{get:function(){var b=INSTART.common.unwrap(this);return INSTART.common.interceptObj(b[a])},set:function(a){return a}})},b=function(a){a=INSTART.common.unwrap(a);a.__plength=a.length;for(var b=l;b<a.length;b++)n(b)};INSTART.NamedNodeMap.wrap=function(a){var c;INSTART.common.hasWrapper(a)?c=INSTART.common.getWrapper(a):(c=INSTART.common.protoWrapperProperties(a),c=Object.create(m,c),INSTART.common.setWrapper(a,
c));b(c);return c};var e;e=Object.create(m,{setNamedItem:{value:function(a){"SRC"==a.name.toUpperCase()?INSTART.common.getWrapper(INSTART.common.unwrap(this)._img).setAttributeNode(a):m.setNamedItem.call(this,a)}}});INSTART.NamedNodeMap.wrapImageAttributes=function(a,c){var f;INSTART.common.hasWrapper(a)?f=INSTART.common.getWrapper(a):(a._img=c,f=INSTART.common.protoWrapperProperties(a),f=Object.create(e,f),INSTART.common.setWrapper(a,f));b(f);return f}})(window,document);(function(j,c){INSTART.MutationEvent={};var l=INSTART.common.getOldFcn(c.createEvent).call(c,"MutationEvent"),k;k=INSTART.common.defaultProtoWrapper(l,function(c,f){for(var h="currentTarget explicitOriginalTarget originalTarget relatedNode srcElement target".split(" "),j=0;j<h.length;j++){var b=h[j];b in c&&(f[b]=function(){var c=b;return{get:function(){return INSTART.common.interceptObj(INSTART.common.unwrap(this)[c])}}}())}});INSTART.MutationEvent.wrap=function(c){if(INSTART.common.hasWrapper(c))return INSTART.common.getWrapper(c);
var f=INSTART.common.protoWrapperProperties(c),f=Object.create(k,f);INSTART.common.setWrapper(c,f);return f};Object.defineProperty(MutationEvent.prototype,"__wrap",{value:INSTART.MutationEvent.wrap,enumerable:!1})})(window,document);(function(j,c){INSTART.MouseEvent={};var l=INSTART.common.getOldFcn(c.createEvent).call(c,"MouseEvent"),k;k=INSTART.common.defaultProtoWrapper(l,function(c,f){for(var h="currentTarget explicitOriginalTarget originalTarget rangeParent relatedNode relatedTarget srcElement target".split(" "),j=0;j<h.length;j++){var b=h[j];b in c&&(f[b]=function(){var c=b;return{get:function(){return INSTART.common.interceptObj(INSTART.common.unwrap(this)[c])}}}())}});INSTART.MouseEvent.wrap=function(c){if(INSTART.common.hasWrapper(c))return INSTART.common.getWrapper(c);
var f=INSTART.common.protoWrapperProperties(c),f=Object.create(k,f);INSTART.common.setWrapper(c,f);return f};Object.defineProperty(MouseEvent.prototype,"__wrap",{value:INSTART.MouseEvent.wrap,enumerable:!1})})(window,document);(function(j,c){INSTART.DocumentFragment={};var l=INSTART.common.getOldFcn(c.createDocumentFragment).call(c,"DocumentFragment"),k;k=INSTART.common.defaultProtoWrapper(l,function(c,f){for(var h="childNodes firstChild lastChild nextSibling parentElement parentNode previousSibling".split(" "),j=0;j<h.length;++j){var b=h[j];b in c&&(f[b]=function(){var c=b;return{get:function(){return INSTART.common.interceptObj(INSTART.common.unwrap(this)[c])}}}())}});INSTART.DocumentFragment.wrap=function(c){if(INSTART.common.hasWrapper(c))return INSTART.common.getWrapper(c);
var f=INSTART.common.protoWrapperProperties(c),f=Object.create(k,f);INSTART.common.setWrapper(c,f);return f}})(window,document);
INSTART.init({"apiDomain":"assets.insnw.net","enableImageVirtualization":false,"partialImage":false,"rId":"34","useImageApi":false,"virtualDomains":4,"virtualizeDomains":["qph\\.is\\.quoracdn\\.net","qim\\.is\\.quoracdn\\.net"]}
);